
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../git/">
      
      
        <link rel="next" href="../direnv/">
      
      
        <link rel="alternate" type="application/rss+xml" title="RSS feed" href="../../../feed_rss_created.xml">
        <link rel="alternate" type="application/rss+xml" title="RSS feed of updated content" href="../../../feed_rss_updated.xml">
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.0, mkdocs-material-9.5.26">
    
    
      
        <title>docker - digital garden</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.6543a935.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CFira+Code:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Fira Code"}</style>
      
    
    
      <link rel="stylesheet" href="../../../css/timeago.css">
    
      <link rel="stylesheet" href="../../../stylesheets/extra.css">
    
      <link rel="stylesheet" href="../../../stylesheets/gist.css">
    
      <link rel="stylesheet" href="../../../stylesheets/code-highlighting.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
   <link href="../../../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
    html.glightbox-open { overflow: initial; height: 100%; }
    .gslide-title { margin-top: 0px; user-select: text; }
    .gslide-desc { color: #666; user-select: text; }
    .gslide-image img { background: white; }
    .gscrollbar-fixer { padding-right: 15px; }
    .gdesc-inner { font-size: 0.75rem; }
    body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
    body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
    body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}</style> <script src="../../../assets/javascripts/glightbox.min.js"></script></head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#buildx" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="digital garden" class="md-header__button md-logo" aria-label="digital garden" data-md-component="logo">
      
  <img src="../../../assets/images/sheldon-avatar.jpg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            digital garden
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              docker
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/sheldonhull/digital-garden" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../../welcome/" class="md-tabs__link">
        
  
    
  
  home

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../.." class="md-tabs__link">
        
  
    
  
  posts

      </a>
    </li>
  

      
        
  
  
    
  
  
    
    
      
  
  
    
  
  
    
    
      
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../task/" class="md-tabs__link">
          
  
    
  
  notes

        </a>
      </li>
    
  

    
  

    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../2023/" class="md-tabs__link">
          
  
    
  
  archive

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="digital garden" class="md-nav__button md-logo" aria-label="digital garden" data-md-component="logo">
      
  <img src="../../../assets/images/sheldon-avatar.jpg" alt="logo">

    </a>
    digital garden
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/sheldonhull/digital-garden" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../welcome/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    posts
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
      
        
      
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
            
  
  <span class="md-ellipsis">
    notes
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            notes
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1" checked>
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Development
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3_1" id="__nav_3_1_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_1_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3_1">
            <span class="md-nav__icon md-icon"></span>
            Development
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    
    
      
        
      
        
      
        
          
        
      
        
      
        
      
        
      
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1_1" checked>
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Tooling
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3_1_1" id="__nav_3_1_1_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_1_1_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3_1_1">
            <span class="md-nav__icon md-icon"></span>
            Tooling
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../task/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    task
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../precommit/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    precommit
  </span>
  

      </a>
    </li>
  

              
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../git/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    git
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    docker
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    docker
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#buildx" class="md-nav__link">
    <span class="md-ellipsis">
      Buildx
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#resources" class="md-nav__link">
    <span class="md-ellipsis">
      Resources
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#assumptions" class="md-nav__link">
    <span class="md-ellipsis">
      Assumptions
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#arguments" class="md-nav__link">
    <span class="md-ellipsis">
      Arguments
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#building" class="md-nav__link">
    <span class="md-ellipsis">
      Building
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#installation-scripts" class="md-nav__link">
    <span class="md-ellipsis">
      Installation Scripts
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#syntax-tips" class="md-nav__link">
    <span class="md-ellipsis">
      Syntax Tips
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Syntax Tips">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#installing-apps" class="md-nav__link">
    <span class="md-ellipsis">
      Installing Apps
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#best-practice" class="md-nav__link">
    <span class="md-ellipsis">
      Best Practice
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Best Practice">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#smaller-layers" class="md-nav__link">
    <span class="md-ellipsis">
      Smaller Layers
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#user-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      User Configuration
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#environment-variables" class="md-nav__link">
    <span class="md-ellipsis">
      Environment Variables
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#homebrew" class="md-nav__link">
    <span class="md-ellipsis">
      Homebrew
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#powershell-tooling" class="md-nav__link">
    <span class="md-ellipsis">
      PowerShell Tooling
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#python-3" class="md-nav__link">
    <span class="md-ellipsis">
      Python 3
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pre-commit-tooling" class="md-nav__link">
    <span class="md-ellipsis">
      Pre-Commit Tooling
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#go-task" class="md-nav__link">
    <span class="md-ellipsis">
      Go-Task
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#full-dockerfile-examples" class="md-nav__link">
    <span class="md-ellipsis">
      Full Dockerfile Examples
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Full Dockerfile Examples">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#codespaces-ubuntu-general-development-build" class="md-nav__link">
    <span class="md-ellipsis">
      Codespaces - Ubuntu General Development Build
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#other-dockerfile-fragments" class="md-nav__link">
    <span class="md-ellipsis">
      Other Dockerfile Fragments
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Other Dockerfile Fragments">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#mount-ssh-keys" class="md-nav__link">
    <span class="md-ellipsis">
      Mount SSH Keys
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dotnet" class="md-nav__link">
    <span class="md-ellipsis">
      dotnet
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gitversion" class="md-nav__link">
    <span class="md-ellipsis">
      GitVersion
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mage" class="md-nav__link">
    <span class="md-ellipsis">
      Mage
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#security-tools-for-lefthook" class="md-nav__link">
    <span class="md-ellipsis">
      Security Tools for Lefthook
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#terminal-tools" class="md-nav__link">
    <span class="md-ellipsis">
      Terminal Tools
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#powershell" class="md-nav__link">
    <span class="md-ellipsis">
      powershell
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#installation-snippets" class="md-nav__link">
    <span class="md-ellipsis">
      Installation Snippets
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Installation Snippets">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#markdown-lint" class="md-nav__link">
    <span class="md-ellipsis">
      Markdown Lint
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gitversion_1" class="md-nav__link">
    <span class="md-ellipsis">
      Gitversion
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Gitversion">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#install-aws-cli-session-manager-plugin" class="md-nav__link">
    <span class="md-ellipsis">
      Install AWS CLI &amp; Session Manager Plugin
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#install-go" class="md-nav__link">
    <span class="md-ellipsis">
      Install Go
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#install-dotnet" class="md-nav__link">
    <span class="md-ellipsis">
      Install Dotnet
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#codespaces-remote-containers" class="md-nav__link">
    <span class="md-ellipsis">
      Codespaces &amp; Remote Containers
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Codespaces & Remote Containers">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#troubleshooting-cloning-a-repo-in-volume" class="md-nav__link">
    <span class="md-ellipsis">
      Troubleshooting Cloning a Repo In Volume
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#docker-snippets" class="md-nav__link">
    <span class="md-ellipsis">
      Docker Snippets
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../direnv/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    direnv
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../aqua/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    aqua
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
          
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1_2" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../shell/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Shell
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3_1_2" id="__nav_3_1_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_1_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_1_2">
            <span class="md-nav__icon md-icon"></span>
            Shell
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../shell/shell/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    shell
  </span>
  

      </a>
    </li>
  

              
            
              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
          
        
      
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1_3" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../powershell/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Powershell
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3_1_3" id="__nav_3_1_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_1_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_1_3">
            <span class="md-nav__icon md-icon"></span>
            Powershell
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../powershell/powershell/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    powershell
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../powershell/pester/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Pester
  </span>
  

      </a>
    </li>
  

              
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../powershell/dbatools/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    dbatools
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../observability/observability/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    observability
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../level-up/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Level-Up
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../kubernetes/kubernetes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    kubernetes
  </span>
  

      </a>
    </li>
  

              
            
              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1_8" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../go/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Go
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3_1_8" id="__nav_3_1_8_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_1_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_1_8">
            <span class="md-nav__icon md-icon"></span>
            Go
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../go/vscode-configuration/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    VSCode Configuration for Go
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../go/using-go-tools/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Using Go Tools
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../go/testing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Go Testing
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../go/pre-commit/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Pre-Commit
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../go/modules/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Go Modules
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../go/mage/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Mage
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../go/logging/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Go Logging
  </span>
  

      </a>
    </li>
  

              
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../go/http/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    HTTP
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../go/goroutines/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    goroutines
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../go/go/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    go
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../go/effective-go/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Effective Go
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../go/dagger/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Dagger
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../go/code-coverage/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Code Coverage
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
          
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1_9" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../front-end/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Front end
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3_1_9" id="__nav_3_1_9_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_1_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_1_9">
            <span class="md-nav__icon md-icon"></span>
            Front end
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../front-end/yarn/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Yarn
  </span>
  

      </a>
    </li>
  

              
            
              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
          
        
      
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1_10" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../build-release-engineering/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Build release engineering
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3_1_10" id="__nav_3_1_10_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_1_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_1_10">
            <span class="md-nav__icon md-icon"></span>
            Build release engineering
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../build-release-engineering/renovate/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    renovate
  </span>
  

      </a>
    </li>
  

              
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../build-release-engineering/azure-pipelines/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Azure Pipelines
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
          
        
      
        
      
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1_11" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../aws/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Aws
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3_1_11" id="__nav_3_1_11_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_1_11_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_1_11">
            <span class="md-nav__icon md-icon"></span>
            Aws
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../aws/s5cmd/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Syncing Files Using S5Cmd
  </span>
  

      </a>
    </li>
  

              
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../aws/aws-powershell/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    AWS PowerShell
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../aws/aws-cli/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    aws-cli
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1_12" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../ai/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Ai
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3_1_12" id="__nav_3_1_12_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_1_12_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_1_12">
            <span class="md-nav__icon md-icon"></span>
            Ai
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ai/copilot/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    copilot
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ai/chat/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    chat
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2" >
        
          
          <label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Career
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2">
            <span class="md-nav__icon md-icon"></span>
            Career
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../career/management-dynamics/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Management Dynamics
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../career/eponymous-laws/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Eponymous Laws
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../career/engineering-culture/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Engineering Culture
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../career/communication/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Communication
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    archive
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            archive
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../2023/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2023
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../2022/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2022
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../2021/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2021
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../2020/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2020
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../2019/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2019
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../2018/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2018
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../2017/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2017
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../2016/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2016
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../2015/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2015
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../2014/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2014
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../../2013/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2013
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#buildx" class="md-nav__link">
    <span class="md-ellipsis">
      Buildx
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#resources" class="md-nav__link">
    <span class="md-ellipsis">
      Resources
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#assumptions" class="md-nav__link">
    <span class="md-ellipsis">
      Assumptions
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#arguments" class="md-nav__link">
    <span class="md-ellipsis">
      Arguments
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#building" class="md-nav__link">
    <span class="md-ellipsis">
      Building
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#installation-scripts" class="md-nav__link">
    <span class="md-ellipsis">
      Installation Scripts
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#syntax-tips" class="md-nav__link">
    <span class="md-ellipsis">
      Syntax Tips
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Syntax Tips">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#installing-apps" class="md-nav__link">
    <span class="md-ellipsis">
      Installing Apps
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#best-practice" class="md-nav__link">
    <span class="md-ellipsis">
      Best Practice
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Best Practice">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#smaller-layers" class="md-nav__link">
    <span class="md-ellipsis">
      Smaller Layers
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#user-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      User Configuration
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#environment-variables" class="md-nav__link">
    <span class="md-ellipsis">
      Environment Variables
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#homebrew" class="md-nav__link">
    <span class="md-ellipsis">
      Homebrew
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#powershell-tooling" class="md-nav__link">
    <span class="md-ellipsis">
      PowerShell Tooling
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#python-3" class="md-nav__link">
    <span class="md-ellipsis">
      Python 3
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#pre-commit-tooling" class="md-nav__link">
    <span class="md-ellipsis">
      Pre-Commit Tooling
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#go-task" class="md-nav__link">
    <span class="md-ellipsis">
      Go-Task
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#full-dockerfile-examples" class="md-nav__link">
    <span class="md-ellipsis">
      Full Dockerfile Examples
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Full Dockerfile Examples">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#codespaces-ubuntu-general-development-build" class="md-nav__link">
    <span class="md-ellipsis">
      Codespaces - Ubuntu General Development Build
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#other-dockerfile-fragments" class="md-nav__link">
    <span class="md-ellipsis">
      Other Dockerfile Fragments
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Other Dockerfile Fragments">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#mount-ssh-keys" class="md-nav__link">
    <span class="md-ellipsis">
      Mount SSH Keys
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dotnet" class="md-nav__link">
    <span class="md-ellipsis">
      dotnet
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gitversion" class="md-nav__link">
    <span class="md-ellipsis">
      GitVersion
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mage" class="md-nav__link">
    <span class="md-ellipsis">
      Mage
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#security-tools-for-lefthook" class="md-nav__link">
    <span class="md-ellipsis">
      Security Tools for Lefthook
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#terminal-tools" class="md-nav__link">
    <span class="md-ellipsis">
      Terminal Tools
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#powershell" class="md-nav__link">
    <span class="md-ellipsis">
      powershell
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#installation-snippets" class="md-nav__link">
    <span class="md-ellipsis">
      Installation Snippets
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Installation Snippets">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#markdown-lint" class="md-nav__link">
    <span class="md-ellipsis">
      Markdown Lint
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#gitversion_1" class="md-nav__link">
    <span class="md-ellipsis">
      Gitversion
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Gitversion">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#install-aws-cli-session-manager-plugin" class="md-nav__link">
    <span class="md-ellipsis">
      Install AWS CLI &amp; Session Manager Plugin
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#install-go" class="md-nav__link">
    <span class="md-ellipsis">
      Install Go
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#install-dotnet" class="md-nav__link">
    <span class="md-ellipsis">
      Install Dotnet
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#codespaces-remote-containers" class="md-nav__link">
    <span class="md-ellipsis">
      Codespaces &amp; Remote Containers
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Codespaces & Remote Containers">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#troubleshooting-cloning-a-repo-in-volume" class="md-nav__link">
    <span class="md-ellipsis">
      Troubleshooting Cloning a Repo In Volume
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#docker-snippets" class="md-nav__link">
    <span class="md-ellipsis">
      Docker Snippets
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  
  
<nav class="md-tags" >
  
    
    
    
      <span class="md-tag">development</span>
    
  
    
    
    
      <span class="md-tag">docker</span>
    
  
</nav>


  
  


  <h1>docker</h1>

<h2 id="buildx">Buildx<a class="headerlink" href="#buildx" title="Permanent link"></a></h2>
<blockquote>
<p>Docker Buildx is a CLI plugin that extends the docker command with the full support of the features provided by Moby BuildKit builder toolkit.
It provides the same user experience as docker build with many new features like creating scoped builder instances and building against multiple nodes concurrently.<sup id="fnref:docker-buildx"><a class="footnote-ref" href="#fn:docker-buildx">2</a></sup></p>
</blockquote>
<p>Enable.</p>
<div class="highlight"><pre><span></span><code>DOCKER_BUILDKIT=1
</code></pre></div>
<p><a href="https://docs.docker.com/buildx/working-with-buildx/#set-buildx-as-the-default-builder">Set as default builder</a></p>
<h2 id="resources">Resources<a class="headerlink" href="#resources" title="Permanent link"></a></h2>
<table>
<thead>
<tr>
<th>Resource</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="https://github.com/microsoft/vscode-dev-containers">Codespaces</a></td>
<td>Install scripts for debian, examples of complex builds and installs for dev tooling</td>
</tr>
<tr>
<td><a href="https://github.com/microsoft/vscode-dev-containers/tree/main/script-library">Codespaces Library Scripts</a></td>
<td>Subdirectory with installation scripts so I don't need to rebuild the wheel </td>
</tr>
<tr>
<td><a href="https://code.visualstudio.com/docs/remote/containers-advanced">Advanced Codespaces Configuration</a></td>
<td>Cool tips on improving codespaces configuration performance, customization, and installs</td>
</tr>
</tbody>
</table>
<h2 id="assumptions">Assumptions<a class="headerlink" href="#assumptions" title="Permanent link"></a></h2>
<p>The majority of the code examples apply to a base image of Ubuntu &amp; Debian.</p>
<p>Since this image has GCC prebaked in, it's much easier to use with dotnet tools and other apps that require it.</p>
<h2 id="arguments">Arguments<a class="headerlink" href="#arguments" title="Permanent link"></a></h2>
<p><a href="https://docs.docker.com/engine/reference/builder/#understand-how-arg-and-from-interact">Understand how ARG and FROM interac</a></p>
<h2 id="building">Building<a class="headerlink" href="#building" title="Permanent link"></a></h2>
<p>Manually triggering build can be done via command below, replacing <code>codespace</code> with whatever tagged image name is desired.</p>
<div class="highlight"><pre><span></span><code>docker build --pull --rm -f &quot;.devcontainer/Dockerfile&quot; -t codespace:latest &quot;.devcontainer&quot;```
</code></pre></div>
<h2 id="installation-scripts">Installation Scripts<a class="headerlink" href="#installation-scripts" title="Permanent link"></a></h2>
<p><code>gh repo clone microsoft/vscode-dev-containers</code> and then copy the <code>script-library</code> directory to <code>${ProjectDirectory}/.devcontainer/script-library</code></p>
<h2 id="syntax-tips">Syntax Tips<a class="headerlink" href="#syntax-tips" title="Permanent link"></a></h2>
<h3 id="installing-apps">Installing Apps<a class="headerlink" href="#installing-apps" title="Permanent link"></a></h3>
<p>Use an environment variable to cleanup the dockerfile install commands.</p>
<div class="highlight"><pre><span></span><code># Additonal applications to install
ENV ADDITIONAL_APPS \
    curl \
    g++ \
    gcc \
    gettext \
    git \
    locales \
    locales-all \
    make \
    nano \
    openssh-client \
    rsync
RUN apt -yqq install ${ADDITIONAL_APPS} --no-install-recommends  \
    &amp;&amp; apt-get -yqq autoremove \
&amp;&amp; rm -rf /var/lib/apt/lists/*
</code></pre></div>
<h2 id="best-practice">Best Practice<a class="headerlink" href="#best-practice" title="Permanent link"></a></h2>
<h3 id="smaller-layers">Smaller Layers<a class="headerlink" href="#smaller-layers" title="Permanent link"></a></h3>
<ul>
<li>
<p>Use <a href="https://github.com/wagoodman/dive">dive</a> and the associated VSCode extension to explore the layers for reducing size.</p>
</li>
<li>
<p>Use cleanup commands on any layer to reduce it's cached size by running the clean and rm command at the end of the layer.</p>
</li>
<li>
<p>Use <code>--no-install-recommends</code> to reduce installation size when running <code>apt-get</code></p>
</li>
</ul>
<p>RUN apt-get -yyq update &amp;&amp; apt-get -yyq install tree --no-install-recommends \
   &amp;&amp; apt-get -yyq clean &amp;&amp; rm -rf /var/lib/apt/lists/*</p>
<h2 id="user-configuration">User Configuration<a class="headerlink" href="#user-configuration" title="Permanent link"></a></h2>
<p>Using dotfiles with chezmoi, manually trigger using a command such as:</p>
<div class="highlight"><pre><span></span><code>curl -sfL https://git.io/chezmoi | sh
echo &quot;enter github username for chezmoi repo&quot;
./bin/chezmoi init --apply --verbose https://github.com/$(read)/chezmoi.git
</code></pre></div>
<h2 id="environment-variables">Environment Variables<a class="headerlink" href="#environment-variables" title="Permanent link"></a></h2>
<h2 id="homebrew">Homebrew<a class="headerlink" href="#homebrew" title="Permanent link"></a></h2>
<p>You can install Homebrew for Linux in two different ways, using multi-stage build, or the vscode install script <a href="https://github.com/microsoft/vscode-dev-containers/blob/main/script-library/homebrew-debian.sh">homebrew-debian.sh</a></p>
<p>Multistage would do this:</p>
<div class="highlight"><pre><span></span><code>ARG VARIANT=&quot;focal&quot;
FROM homebrew/brew:latest AS DOCKERBREW
FROM mcr.microsoft.com/vscode/devcontainers/base:${VARIANT}

USER root
RUN useradd -m -s /bin/bash linuxbrew  &amp;&amp; \
    echo &#39;linuxbrew ALL=(ALL) NOPASSWD:ALL&#39; &gt;&gt;/etc/sudoers

USER linuxbrew
COPY --from=DOCKERBREW /home/linuxbrew/.linuxbrew /usr/local/bin/brew
USER root
RUN chmod -R a+rwx /usr/local/bin/brew

USER $USERNAME
ENV BREW_PREFIX=/home/linuxbrew/.linuxbrew
ENV PATH=${BREW_PREFIX}/sbin:${BREW_PREFIX}/bin:${PATH}
RUN echo &quot; brew version: $(brew --version)&quot;
</code></pre></div>
<p>Using the install script or the curl command to install might take signficantly longer as it recompiles due to gcc.</p>
<div class="highlight"><pre><span></span><code>USER root

ENV BREW_PREFIX=/home/linuxbrew/.linuxbrew
ENV PATH=${BREW_PREFIX}/sbin:${BREW_PREFIX}/bin:${PATH}
RUN yes | unminimize 2&gt;&amp;1 \
    &amp;&amp; echo &quot; Beginning homebrew-debian.sh&quot; &amp;&amp; bash /tmp/library-scripts/homebrew-debian.sh \
    &amp;&amp; echo &quot; HomeBrew Installed: [$(brew --version)]&quot; \
    &amp;&amp; apt-get -yyq clean &amp;&amp; rm -rf /var/lib/apt/lists/*
</code></pre></div>
<h2 id="powershell-tooling">PowerShell Tooling<a class="headerlink" href="#powershell-tooling" title="Permanent link"></a></h2>
<h2 id="python-3">Python 3<a class="headerlink" href="#python-3" title="Permanent link"></a></h2>
<p>Use the library scripts <a href="https://github.com/microsoft/vscode-dev-containers/blob/main/script-library/python-debian.sh">python-debian.sh</a> in vscode repo to simplify installation then use the following install command.</p>
<div class="highlight"><pre><span></span><code>ARG PYTHON_PATH=&quot;/usr/local/python&quot;
ARG PYTHON_VERSION=&quot;3.8.3&quot;
ARG PIPX_BIN_DIR=&quot;/usr/local/py-utils/bin&quot;
ARG PIPX_HOME=&quot;/usr/local/py-utils&quot;
ARG UPDATE_RC=&quot;true&quot;
ARG INSTALL_PYTHON_TOOLS=&quot;true&quot;

USER root

# From .devcontainer/script-library/docs/python.md
ENV PIPX_HOME=${PIXY_HOME} \
    PIPX_BIN_DIR=${PIPX_BIN_DIR}}
ENV PATH=${PYTHON_PATH}/bin:${PATH}:${PIPX_BIN_DIR}
RUN yes | unminimize 2&gt;&amp;1 \
    &amp;&amp; bash /tmp/library-scripts/python-debian.sh &quot;${PYTHON_VERSION}&quot; &quot;${PYTHON_PATH}&quot; &quot;${PIPX_HOME}&quot; &quot;${USERNAME}&quot; &quot;${UPDATE_RC}&quot; &quot;${INSTALL_PYTHON_TOOLS}&quot;  \
    &amp;&amp; apt-get -yyq clean &amp;&amp; rm -rf /var/lib/apt/lists/*
USER $USERNAME

# Verify the nonroot user has access now
ENV PATH=&quot;/usr/local/python${PYTHON_VERSION}:${PATH}&quot;
RUN echo &quot; python-debian installed with version: [$(python3 --version)]&quot;



RUN apt-get -yyq update &amp;&amp; apt-get -qyy install python3-venv python3-pip --no-install-recommends \
    &amp;&amp; apt-get -yyq clean \
    &amp;&amp; rm -rf /var/lib/apt/lists/*
</code></pre></div>
<h2 id="pre-commit-tooling">Pre-Commit Tooling<a class="headerlink" href="#pre-commit-tooling" title="Permanent link"></a></h2>
<p>This requires python and pip to be installed correctly (see previous section).</p>
<div class="highlight"><pre><span></span><code>RUN python3 -m pip install pre-commit
</code></pre></div>
<p>Since pre-commit needs a repo to install the pre-commit hook to, after loading the project run <code>task precommit:init</code> if Task is installed, else run <code>pre-commit install</code> in the cloned repo.</p>
<h2 id="go-task">Go-Task<a class="headerlink" href="#go-task" title="Permanent link"></a></h2>
<div class="highlight"><pre><span></span><code>version: &#39;3&#39;
silent: true
output: prefixed
vars:
  CONTAINERNAME: codespace-general
  DOCKER_BUILDKIT: 1
tasks:
  build:
    desc: build codespaces container
    cmds:
    - docker build --pull --rm -f &quot;.devcontainer/Dockerfile&quot; -t {{ .CONTAINERNAME }}:latest &quot;.devcontainer&quot;
  rebuild:
    desc: build codespaces container without using cache in case of cached changes preventing new updates from being picked up
    cmds:
    - docker build --pull --rm --no-cache -f &quot;.devcontainer/Dockerfile&quot; -t {{ .CONTAINERNAME }}:latest &quot;.devcontainer&quot;
</code></pre></div>
<h2 id="full-dockerfile-examples">Full Dockerfile Examples<a class="headerlink" href="#full-dockerfile-examples" title="Permanent link"></a></h2>
<h3 id="codespaces-ubuntu-general-development-build">Codespaces - Ubuntu General Development Build<a class="headerlink" href="#codespaces-ubuntu-general-development-build" title="Permanent link"></a></h3>
<p>This is a general purpose dev container for dev tooling such python3, Go, PowerShell, pre-commit, and other useful tools.</p>
<p>It is designed to be used for any of these projects with some useful tooling like Brew, bit (git enhanced cli), git town and others.</p>
<p>Tweaks to the <code>devcontainer.json</code> support mounting aws local credentials into the container, using volumes for high IO package/artifact directories, and improve drive performance by marking the container as the primary and the host directory mounted version to be ok to lag a bit.</p>
<div class="highlight"><pre><span></span><code>  &quot;workspaceMount&quot;: &quot;source=${localWorkspaceFolder},target=/home/codespace/workspace,type=bind,consistency=delegated&quot;,
  &quot;mounts&quot;: [
    &quot;source=vscodeextensions,target=/root/.vscode-server/extensions,type=volume&quot;,
    &quot;source=artifacts,target=${containerWorkspaceFolder}/artifacts,type=volume&quot;,
    &quot;source=packages,target=${containerWorkspaceFolder}/packages,type=volume&quot;,
    &quot;source=tools,target=${containerWorkspaceFolder}/tools,type=volume&quot;,
    &quot;source=${localEnv:HOME}${localEnv:USERPROFILE}/.aws/credentials,target=/home/codespace/.aws/credentials,type=bind,consistency=delegated&quot;,
  ],
  &quot;postCreateCommand&quot;: [
    &quot;uname -a&quot;,
    &quot;pre-commit install&quot;
  ],
// Set *default* container specific settings.json values on container create.
  &quot;settings&quot;: {
    &quot;terminal.integrated.profiles.linux&quot;: {
      &quot;bash&quot;: {
        &quot;path&quot;: &quot;bash&quot;
      },
      &quot;zsh&quot;: {
        &quot;path&quot;: &quot;zsh&quot;
      },
      &quot;fish&quot;: {
        &quot;path&quot;: &quot;fish&quot;
      },
      &quot;tmux&quot;: {
        &quot;path&quot;: &quot;tmux&quot;,
        &quot;icon&quot;: &quot;terminal-tmux&quot;
      },
      &quot;pwsh&quot;: {
        &quot;path&quot;: &quot;pwsh&quot;,
        &quot;icon&quot;: &quot;terminal-powershell&quot;
      }
    }
  },



# See here for image contents: https://github.com/microsoft/vscode-dev-containers/tree/v0.163.1/containers/ubuntu/.devcontainer/base.Dockerfile
ARG VARIANT=&quot;focal&quot;
FROM mcr.microsoft.com/vscode/devcontainers/base:${VARIANT}

# Codespace/Docker User Config
ARG USER_UID=1000
ARG USER_GID=$USER_UID
ARG USERNAME=vscode

# Common Debian Install Settings
ARG INSTALL_ZSH=&quot;true&quot;
ARG UPGRADE_PACKAGES=&quot;true&quot;

# PYTHON INSTALL SETTINGS
ARG PYTHON_PATH=&quot;/usr/local/python&quot;
ARG PYTHON_VERSION=&quot;3.8.3&quot;
ARG PIPX_BIN_DIR=&quot;/usr/local/py-utils/bin&quot;
ARG PIPX_HOME=&quot;/usr/local/py-utils&quot;
ARG UPDATE_RC=&quot;true&quot;
ARG INSTALL_PYTHON_TOOLS=&quot;true&quot;

# CONFIGURE USER FOR LINUXBREW
USER root
RUN useradd -m -s /bin/bash linuxbrew  &amp;&amp; \
    echo &#39;linuxbrew ALL=(ALL) NOPASSWD:ALL&#39; &gt;&gt;/etc/sudoers

# Install Software Properties Common
# From Stack Overflow: This software provides an abstraction of the used apt repositories.
# It allows you to easily manage your distribution and independent software vendor software sources.
# Without it, you would need to add and remove repositories (such as PPAs) manually by editing /etc/apt/sources.list and/or any subsidiary files in /etc/apt/sources.list.d
USER root
RUN apt-get -yyq update &amp;&amp; apt-get -yyq install software-properties-common --no-install-recommends  &amp;&amp; add-apt-repository universe &amp;&amp; apt-get -yyq update &amp;&amp; rm -rf /var/lib/apt/lists/*

# Install Python 3 &amp; Python tools
RUN apt-get -qqy update &amp;&amp; export DEBIAN_FRONTEND=noninteractive \
    &amp;&amp; apt-get -qqy install --no-install-recommends build-essential gcc python3 python3-pip python3-setuptools \
    &amp;&amp; apt-get clean &amp;&amp; rm -rf /var/lib/apt/lists/*
RUN wget https://bootstrap.pypa.io/get-pip.py
RUN python3 get-pip.py
RUN pip install --upgrade pip

# For spinning up an interactive desktop using container as host
# Optional to allow simulated desktop dev experience without need to use VirtualBox VM&#39;s for this
# Adds a lightweight [Fluxbox](http://fluxbox.org/) based desktop to the container that can be accessed using a VNC viewer or the web.
# UI-based commands executed from the built in VS code terminal will open on the desktop automatically.
ENV DBUS_SESSION_BUS_ADDRESS=&quot;autolaunch:&quot; DISPLAY=&quot;:1&quot; LANG=&quot;en_US.UTF-8&quot; LANGUAGE=&quot;en_US.UTF-8&quot;
# Go SDK
ENV GOROOT=/usr/local/go GOPATH=/go
ENV PATH=${GOPATH}/bin:${GOROOT}/bin:${PATH}
# Python SDK
ARG PYTHON_PATH=&quot;/usr/local/python&quot;
ENV PIPX_HOME=${PIXY_HOME} PIPX_BIN_DIR=${PIPX_BIN_DIR}
ENV PATH=${PYTHON_PATH}/bin:${PATH}:${PIPX_BIN_DIR}

# RUN #yes | unminimize 2&gt;&amp;1 \
RUN echo &quot; Beginning common-debian.sh&quot; &amp;&amp; bash /tmp/library-scripts/common-debian.sh &quot;${INSTALL_ZSH}&quot; &quot;${USERNAME}&quot; &quot;${USER_UID}&quot; &quot;${USER_GID}&quot; &quot;${UPGRADE_PACKAGES}&quot; &amp;&amp; echo &quot; finished common-debian.sh&quot; \
    # &amp;&amp; echo &quot; Beginning python-debian.sh&quot; &amp;&amp; bash /tmp/library-scripts/python-debian.sh &quot;${PYTHON_VERSION}&quot; &quot;${PYTHON_PATH}&quot; &quot;${PIPX_HOME}&quot; &quot;${USERNAME}&quot; &quot;${UPDATE_RC}&quot; &quot;${INSTALL_PYTHON_TOOLS}&quot;  &amp;&amp; echo &quot; finished python-debian.sh&quot; \
    &amp;&amp; echo &quot; Beginning azcli-debian.sh install&quot; &amp;&amp; bash /tmp/library-scripts/azcli-debian.sh &amp;&amp; echo &quot; PowerShell Installed: [$(pwsh --version)]&quot; \
    &amp;&amp; echo &quot; Beginning docker-in-docker-debian.sh&quot; &amp;&amp; bash /tmp/library-scripts/docker-in-docker-debian.sh &amp;&amp; echo &quot; docker-in-docker-debian.sh completed&quot; \
    &amp;&amp; echo &quot; Beginning go-debian.sh&quot; &amp;&amp; bash /tmp/library-scripts/go-debian.sh &amp;&amp; echo &quot; go-debian completed&quot; \
    # &amp;&amp; echo &quot; Beginning sshd-debian.sh&quot; &amp;&amp; bash /tmp/library-scripts/sshd-debian.sh &amp;&amp; echo &quot; sshd-debian completed&quot; \
    # &amp;&amp; echo &quot; Beginning desktop-lite-debian.sh&quot; &amp;&amp; bash /tmp/library-scripts/desktop-lite-debian.sh &amp;&amp; echo &quot; desktop-lite-debian completed&quot; \
    &amp;&amp; apt-get -yyq clean &amp;&amp; rm -rf /var/lib/apt/lists/* &amp;&amp; rm -rf /tmp/library-scripts &amp;&amp; echo &quot; cleaned install helper scripts&quot;


#################################
# CONFIGURE USER LEVEL SETTINGS #
#################################
USER $USERNAME


########################################
# Configure Environment Vars For Tools #
########################################
ENV BREW_PREFIX=/home/linuxbrew/.linuxbrew
ENV PATH=${BREW_PREFIX}/sbin:${BREW_PREFIX}/bin:${PATH}
ENV PATH=${PYTHON_PATH}/bin:${PATH}:${PIPX_BIN_DIR}

# Ensure default profile directory exists for preferences to be saved and loaded as desired
RUN pwsh -nologo -c &#39;New-Item -Path ($Profile | Split-Path -Parent) -ItemType Directory&#39;



#################
# BREW PACKAGES #
#################
# For enhanced git cli experience
# MACOS: Not Linux RUN HOMEBREW_NO_AUTO_UPDATE=1 brew install bit-git

# For enhanced cross platform prompt with git and powershell both supported
RUN HOMEBREW_NO_AUTO_UPDATE=1 brew install starship

# Dotfiles loader so easy to initialize personal preferences in container with chezmoi init command
RUN HOMEBREW_NO_AUTO_UPDATE=1 brew install chezmoi

# RUN HOMEBREW_NO_AUTO_UPDATE=1 brew install gitversion


#####################
# OTHER DEV TOOLING #
#####################
# bit: For enhanced git cli experience
RUN GO111MODULE=on go get -v -u github.com/chriswalz/bit

USER root
RUN sh -c &quot;$(curl --location https://taskfile.dev/install.sh)&quot; -- -d -b /usr/local/bin
USER $USERNAME

########################
# GO DEVELOPMENT TOOLS #
########################
# Installing proactively to speed up vscode and precommit usage of various tools
  # use binary install not go get for golangci-lint https://golangci-lint.run/usage/install/#local-installation
RUN echo &quot;installing go tools&quot; \
  &amp;&amp; curl -sfL https://raw.githubusercontent.com/securego/gosec/master/install.sh | sh -s -- -b $(go env GOPATH)/bin vX.Y.Z \
  &amp;&amp; go get -u &quot;golang.org/x/tools/cmd/goimports&quot; \
  &amp;&amp; go get -u &quot;github.com/sqs/goreturns&quot; \
  &amp;&amp; go get -u &quot;golang.org/x/lint/golint&quot; \
  &amp;&amp; curl -sSfL https://raw.githubusercontent.com/golangci/golangci-lint/master/install.sh | sh -s -- -b $(go env GOPATH)/bin v1.39.0 \
  &amp;&amp; GO111MODULE=on go get -v -u &quot;github.com/go-critic/go-critic/cmd/gocritic&quot; \
  &amp;&amp; go get -v -u &quot;github.com/uudashr/gopkgs/v2/cmd/gopkgs&quot; \
  &amp;&amp; go get -v -u &quot;github.com/ramya-rao-a/go-outline&quot; \
  &amp;&amp; go get -v -u &quot;github.com/cweill/gotests/gotests&quot; \
  &amp;&amp; go get -v -u &quot;github.com/fatih/gomodifytags&quot; \
  &amp;&amp; go get -v -u &quot;github.com/josharian/impl&quot; \
  &amp;&amp; go get -v -u &quot;github.com/haya14busa/goplay/cmd/goplay&quot; \
  &amp;&amp; go get -v -u &quot;github.com/go-delve/delve/cmd/dlv&quot; \
  &amp;&amp; go get -v -u &quot;github.com/go-delve/delve/cmd/dlv@master&quot; \
  &amp;&amp; go get -v -u &quot;honnef.co/go/tools/cmd/staticcheck&quot; \
  &amp;&amp; go get -v -u &quot;golang.org/x/tools/gopls@v0.6.11&quot; \
  &amp;&amp; go get -v -u github.com/git-chglog/git-chglog/cmd/git-chglog # Generate Changelogs automatically

#####################
# Precommit Install #
#####################
RUN echo &quot;Validating python3 command is recognized: $(python3 --version)&quot;
RUN echo &quot;Validating python3 pip module command is recognized: $(python3 -m pip --version)&quot;
RUN echo &quot;Validating pip command is recognized: $(pip --version)&quot;
RUN python3 -m pip install pre-commit


#############################################################
# SUPPORT CACHING VSCODE EXTENSIONS FOR FASTER PROVISIONING #
#############################################################
# IMPORTANT: This requires updating devcontainer.json per directions to ensure mount arguments passed in
# See: https://code.visualstudio.com/docs/remote/containers-advanced#_avoiding-extension-reinstalls-on-container-rebuild
RUN mkdir -p /home/$USERNAME/.vscode-server/extensions \
    /home/$USERNAME/.vscode-server/extensions &amp;&amp; \
    chown -R $USERNAME \
        /home/$USERNAME/.vscode-server \
        /home/$USERNAME/.vscode-server

# Set multiple labels at once, using line-continuation characters to break long lines
LABEL vendor=misc \
      type=codespaces \
      is-beta=true \
      user=vscode \
      is-production=false \
      version=&quot;0.0.1-beta&quot; \
      release-date=&quot;2021-06-01&quot; \
      description=&quot;development image with tooling for vscode codespaces&quot; \
      maintainer=&quot;me&quot; \
      name=codespaces-general
</code></pre></div>
<h3 id="other-dockerfile-fragments">Other Dockerfile Fragments<a class="headerlink" href="#other-dockerfile-fragments" title="Permanent link"></a></h3>
<h4 id="mount-ssh-keys">Mount SSH Keys<a class="headerlink" href="#mount-ssh-keys" title="Permanent link"></a></h4>
<ul>
<li>Use cached: when the host performs changes, the container is in read only mode.<sup id="fnref:stack-overflow-answer-cached-or-delegated"><a class="footnote-ref" href="#fn:stack-overflow-answer-cached-or-delegated">1</a></sup></li>
<li>Use delegated: when docker container performs changes, host is in read only mode.</li>
<li>Use default: When both container and host actively and continuously perform changes on data.</li>
</ul>
<p>"mounts": [
  "source=${localEnv:HOME}${localEnv:USERPROFILE}/.ssh,target=/home/codespace/.ssh/,type=bind,consistency=cached"
  ]</p>
<div class="admonition warning">
<p class="admonition-title">cannot create /home/$USERNAME/.ssh/known_hosts: Permission denied</p>
<p>If this fails, try this in your Dockerfile.
Not sure this is required, but did help in one test case, so I'm pinning here.</p>
<div class="highlight"><pre><span></span><code>RUN mkdir -p /home/$USERNAME/.ssh/ &amp;&amp; touch /home/$USERNAME/.ssh/known_hosts
</code></pre></div>
</div>
<h4 id="dotnet">dotnet<a class="headerlink" href="#dotnet" title="Permanent link"></a></h4>
<div class="highlight"><pre><span></span><code># Install DOTNET tooling for benefit of tools like gitversion
RUN echo &quot;downloading microsoft prod packages source&quot; &amp;&amp; wget https://packages.microsoft.com/config/ubuntu/20.10/packages-microsoft-prod.deb -O packages-microsoft-prod.deb &amp;&amp; dpkg -i packages-microsoft-prod.deb
# RUN sudo dpkg --purge packages-microsoft-prod &amp;&amp; sudo dpkg -i packages-microsoft-prod.deb &amp;&amp; sudo apt-get update
RUN echo &quot;Installing dotnet sdk&quot; &amp;&amp; apt-get update \
  &amp;&amp; apt-get  -yyq install apt-transport-https --no-install-recommends \
  &amp;&amp; apt-get  -yyq update \
  &amp;&amp; apt-get  -yyq install dotnet-sdk-5.0 --no-install-recommends  \
  &amp;&amp; rm -rf /var/lib/apt/lists/*
</code></pre></div>
<h4 id="gitversion">GitVersion<a class="headerlink" href="#gitversion" title="Permanent link"></a></h4>
<div class="highlight"><pre><span></span><code>RUN echo &quot;installing gitversion for automatic semver versioning&quot; &amp;&amp; dotnet tool install --global GitVersion.Tool
</code></pre></div>
<h4 id="mage">Mage<a class="headerlink" href="#mage" title="Permanent link"></a></h4>
<p>Go based Make alternative.</p>
<div class="highlight"><pre><span></span><code>RUN go version &amp;&amp; go install github.com/magefile/mage@latest \
    # mage-select provides a nice little mage task selector menu
    &amp;&amp; go install github.com/iwittkau/mage-select@latest
</code></pre></div>
<h4 id="security-tools-for-lefthook">Security Tools for Lefthook<a class="headerlink" href="#security-tools-for-lefthook" title="Permanent link"></a></h4>
<div class="highlight"><pre><span></span><code>RUN go install github.com/evilmartians/lefthook@latest \
&amp;&amp; go install github.com/owenrumney/squealer/cmd/squealer@latest \
&amp;&amp; go install -v github.com/zricethezav/gitleaks@latest
</code></pre></div>
<h4 id="terminal-tools">Terminal Tools<a class="headerlink" href="#terminal-tools" title="Permanent link"></a></h4>
<div class="highlight"><pre><span></span><code>RUN curl -sf https: //gobinaries.com/chriswalz/bit | sh &amp;&amp; echo &quot;installed bit-git&quot; &amp;&amp;
    \ curl -fsSL https://starship.rs/install.sh | sudo bash -s -- --force &amp;&amp; echo &quot;completed setup of starship.rs&quot;
</code></pre></div>
<h4 id="powershell">powershell<a class="headerlink" href="#powershell" title="Permanent link"></a></h4>
<p>Configure pwsh profile</p>
<div class="highlight"><pre><span></span><code># Ensure default profile directory exists for preferences to be saved and loaded as desired
RUN pwsh -nologo -c &#39;New-Item -Path ($Profile | Split-Path -Parent) -ItemType Directory&#39;
</code></pre></div>
<h2 id="installation-snippets">Installation Snippets<a class="headerlink" href="#installation-snippets" title="Permanent link"></a></h2>
<h3 id="markdown-lint">Markdown Lint<a class="headerlink" href="#markdown-lint" title="Permanent link"></a></h3>
<p>Use the docker image of markdownlint to quickly fix basic formatting issues that can cause occasional issues with various markdown renderers.</p>
<div class="highlight"><pre><span></span><code>docker run -i --rm -v ${PWD}:/work tmknom/markdownlint --fix --config .markdownlint.yaml /work/
</code></pre></div>
<p>Use a config like this to tweak the rules to your desired settings</p>
<div class="highlight"><pre><span></span><code># name this file .markdownlint.yaml in your root directory or put in settings directory and pass --config in the setup.

comment: my-markdown-linting-rules
default: true
# MD003:
#   style:
MD007:
  indent: 4
no-hard-tabs: true
whitespace: true
no-bare-urls: true
fenced-code-language: true
no-inline-html: false
MD004:
  style: dash
MD025:
MD041: false
MD013: false
MD046: false
  style: consistent
</code></pre></div>
<h3 id="gitversion_1">Gitversion<a class="headerlink" href="#gitversion_1" title="Permanent link"></a></h3>
<p>Generate semver versioning from commit history automatically, removing need to manually manage semver.</p>
<p>This results in a version history built by the actual commits and merges.</p>
<p>Override allowed using <code>git tag -a 0.1.0 -m"initial commit" &amp;&amp; git push --tags</code></p>
<table>
<thead>
<tr>
<th>Description</th>
<th>Code</th>
</tr>
</thead>
<tbody>
<tr>
<td>Pull gitversion</td>
<td><code>docker pull gittools/gitversion:latest</code></td>
</tr>
<tr>
<td>Run gitversion (calculate current semver from git history) using config from <code>build/GitVersion.yml</code></td>
<td><code>docker run --rm -v ${pwd}:/repo gittools/gitversion:latest /repo /config ./build/GitVersion.yml /showvariable FullSemVer /nofetch</code></td>
</tr>
<tr>
<td>Output Build Server Variables for use in Azure DevOps</td>
<td><code>docker run --rm -v ${pwd}:/repo gittools/gitversion:latest /repo /config ./build/GitVersion.yml /showvariable FullSemVer /nofetch /output buildserver</code></td>
</tr>
</tbody>
</table>
<p>You can use those output variables in your Azure Pipeline to update the build name to include Semver versioning, or pass it into a task to use for building any app.</p>
<div class="highlight"><pre><span></span><code>name: build-$(GitVersion.FullSemVer).$(Build.Reason).$(SourceBranchName).$(Date:yyyyMMdd)-$(Rev:.r)

steps:
- bash: |
    echo &quot;This is your new version: $VERSION&quot;
  displayName: PublishSomething
  env:
    VERSION: $(GitVersion.FullSemVer)
- pwsh: |
  Write-Host &quot;This is your new $ENV:VERSION&quot;
  displayName: PublishingSomethingElse
  env:
    VERSION: $(GitVersion.FullSemVer)
</code></pre></div>
<p>I normally start with <code>Mainline</code> development mode, but if you want to customize this to drive behavior off of conventional commits or other branching and delivery methods, there's a wide range of customization at you can review at: <a href="https://gitversion.net/docs/reference/version-increments">GitVersion Incrementing</a></p>
<div class="highlight"><pre><span></span><code>---
mode: Mainline
branches: {}
ignore:
  sha: []
merge-message-formats: {}
</code></pre></div>
<h4 id="install-aws-cli-session-manager-plugin">Install AWS CLI &amp; Session Manager Plugin<a class="headerlink" href="#install-aws-cli-session-manager-plugin" title="Permanent link"></a></h4>
<p>This is for arm64 based ubuntu containers.</p>
<div class="highlight"><pre><span></span><code>RUN apt-get -yqq update --fix-missing &amp;&amp; apt-get -yqq install pv \
    &amp;&amp; mkdir -p ./tmpinstall &amp;&amp; curl --silent &quot;https://awscli.amazonaws.com/awscli-exe-linux-x86_64.zip&quot; -o &quot;./tmpinstall/awscliv2.zip&quot; \
    &amp;&amp; COUNT=`unzip -q -l &quot;./tmpinstall/awscliv2.zip&quot; | wc -l` \
    &amp;&amp; mkdir -p ./tmpinstall/aws \
    &amp;&amp; unzip &quot;./tmpinstall/awscliv2.zip&quot; -d &quot;./tmpinstall/&quot;  | pv -l -s $COUNT &gt;/dev/null \
    &amp;&amp; ./tmpinstall/aws/install --update | (pv --timer --name &quot; awscli&quot;)  \
    &amp;&amp; rm -rf ./tmpinstall/ \
    &amp;&amp; apt-get clean -y &amp;&amp; rm -rf /var/lib/apt/lists/* /tmp/library-scripts



RUN echo &quot; installing session manager plugin&quot; &amp;&amp; mkdir -p ./tmpinstall \
    &amp;&amp; curl --silent &quot;https://s3.amazonaws.com/session-manager-downloads/plugin/latest/ubuntu_64bit/session-manager-plugin.deb&quot; -o &quot;./tmpinstall/session-manager-plugin.deb&quot; \
    &amp;&amp; dpkg -i ./tmpinstall/session-manager-plugin.deb \
    &amp;&amp; rm -rf ./tmpinstall/
</code></pre></div>
<h3 id="install-go">Install Go<a class="headerlink" href="#install-go" title="Permanent link"></a></h3>
<div class="highlight"><pre><span></span><code>RUN echo &quot; installing go&quot; &amp;&amp; mkdir -p ./tmpinstaller/ &amp;&amp; wget &quot;https://raw.githubusercontent.com/udhos/update-golang/master/update-golang.sh&quot; -O ./tmpinstaller/update-golang.sh \
    &amp;&amp; wget -q https://raw.githubusercontent.com/udhos/update-golang/master/update-golang.sh.sha256 -O ./tmpinstaller/hash.txt  \
    &amp;&amp; chmod +r ./tmpinstaller/hash.txt &amp;&amp; pushd ./tmpinstaller &amp;&amp; sha256sum --check hash.txt &amp;&amp; popd \
    &amp;&amp; chmod +x ./tmpinstaller/update-golang.sh &amp;&amp; sudo bash ./tmpinstaller/update-golang.sh &amp;&amp; rm -rf ./tmpinstaller &amp;&amp; echo &quot; go installed&quot;
ENV PATH=$PATH:/go/bin # this might be required for codespaces
</code></pre></div>
<h3 id="install-dotnet">Install Dotnet<a class="headerlink" href="#install-dotnet" title="Permanent link"></a></h3>
<p>Had issues using the instructions from site, but found a working snippet from this <a href="https://github.com/dotnet/dotnet-docker/blob/main/documentation/scenarios/installing-dotnet.md">github doc</a></p>
<div class="highlight"><pre><span></span><code>ARG DOT_NET_CHANNEL=2.1
USER root
RUN curl -sSL &lt;https://dot.net/v1/dotnet-install.sh&gt; | bash /dev/stdin -Channel ${DOT_NET_CHANNEL} -Runtime dotnet -InstallDir /usr/share/dotnet \
    &amp;&amp; ln -s /usr/share/dotnet/dotnet /usr/bin/dotnet
USER ${USERNAME}
</code></pre></div>
<h2 id="codespaces-remote-containers">Codespaces &amp; Remote Containers<a class="headerlink" href="#codespaces-remote-containers" title="Permanent link"></a></h2>
<p>Using remote containers is great for isolation of unique work and a clean environment.
I tend to use the Universal Image provided by Codespaces, which includes Go, .NET, PowerShell, Python, NodeJS, and more.</p>
<h3 id="troubleshooting-cloning-a-repo-in-volume">Troubleshooting Cloning a Repo In Volume<a class="headerlink" href="#troubleshooting-cloning-a-repo-in-volume" title="Permanent link"></a></h3>
<div class="admonition failure">
<p class="admonition-title">Prompted for SSH Password When Cloning Repo Via SSH In Volume</p>
<p>Fixed my issues with a combination of help from:</p>
<ul>
<li><a href="https://stackoverflow.com/a/60939986/68698">Git SSH public key authentication failed with git on Azure DevOps - Stack Overflow</a> helped a lot.</li>
<li><a href="https://sourabhbajaj.com/mac-setup/Git/">Git  macOS Setup Guide</a></li>
</ul>
</div>
<p>I updated my <code>~/.ssh/config</code> to the following, and was able to clone without being prompted for a password.</p>
<div class="highlight"><pre><span></span><code>Host *
    AddKeysToAgent yes
    UseKeychain yes
    IdentityFile ~/.ssh/id_rsa

Host ssh.dev.azure.com
    PubkeyAcceptedKeyTypes=ssh-rsa
    IdentityFile ~/.ssh/id_rsa
    IdentitiesOnly yes
</code></pre></div>
<ul>
<li><code>ssh-add -K ~/.ssh/id_rsa</code> to finish up.</li>
</ul>
<h2 id="docker-snippets">Docker Snippets<a class="headerlink" href="#docker-snippets" title="Permanent link"></a></h2>
<p>Run a disposable devcontainer with default image to do some experimentation in an interactive prompt.</p>
<div class="highlight"><pre><span></span><code>docker run --rm --init --privileged -it mcr.microsoft.com/vscode/devcontainers/universal:linux /bin/zsh
</code></pre></div>
<div class="footnote">
<hr />
<ol>
<li id="fn:stack-overflow-answer-cached-or-delegated">
<p><a href="https://stackoverflow.com/a/63437557/68698">How do I add :cached or :delegated into a docker-compose.yml volumes list? - Stack Overflow</a>&#160;<a class="footnote-backref" href="#fnref:stack-overflow-answer-cached-or-delegated" title="Jump back to footnote 1 in the text">&#8617;</a></p>
</li>
<li id="fn:docker-buildx">
<p><a href="https://docs.docker.com/buildx/working-with-buildx/#overview">Docker Buildx | Docker Documentation</a>&#160;<a class="footnote-backref" href="#fnref:docker-buildx" title="Jump back to footnote 2 in the text">&#8617;</a></p>
</li>
</ol>
</div>







  
    
  
  
    
  


  <aside class="md-source-file">
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="Last update">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1-2.1-2M12.5 7v5.2l4 2.4-1 1L11 13V7h1.5M11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2v1.8Z"/></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-timeago"><span class="timeago" datetime="2024-06-11T20:55:53+00:00" locale="en"></span></span><span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_date">2024-06-11</span>
  </span>

    
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="Created">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14.47 15.08 11 13V7h1.5v5.25l3.08 1.83c-.41.28-.79.62-1.11 1m-1.39 4.84c-.36.05-.71.08-1.08.08-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8c0 .37-.03.72-.08 1.08.69.1 1.33.32 1.92.64.1-.56.16-1.13.16-1.72 0-5.5-4.5-10-10-10S2 6.5 2 12s4.47 10 10 10c.59 0 1.16-.06 1.72-.16-.32-.59-.54-1.23-.64-1.92M18 15v3h-3v2h3v3h2v-3h3v-2h-3v-3h-2Z"/></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-timeago"><span class="timeago" datetime="2024-06-11T20:55:53+00:00" locale="en"></span></span><span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_date">2024-06-11</span>
  </span>

    
    
    
  </aside>





                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.indexes", "navigation.instant", "navigation.tracking", "navigation.tabs", "navigation.tabs.sticky", "navigation.sections", "toc.follow", "navigation.top", "navigation.path", "search.suggest", "search.highlight", "content.code.copy"], "search": "../../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.ad660dcc.min.js"></script>
      
        <script src="../../../js/timeago.min.js"></script>
      
        <script src="../../../js/timeago_mkdocs_material.js"></script>
      
        <script src="https://unpkg.com/mermaid@10.4.0/dist/mermaid.min.js"></script>
      
    
  <script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(() => { lightbox.reload() });
</script></body>
</html>