
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../../welcome/">
      
      
        <link rel="next" href="../../2023/">
      
      
        <link rel="alternate" type="application/rss+xml" title="RSS feed" href="../../feed_rss_created.xml">
        <link rel="alternate" type="application/rss+xml" title="RSS feed of updated content" href="../../feed_rss_updated.xml">
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.0, mkdocs-material-9.5.26">
    
    
      
        <title>posts - digital garden</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.6543a935.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CFira+Code:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Fira Code"}</style>
      
    
    
      <link rel="stylesheet" href="../../css/timeago.css">
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
      <link rel="stylesheet" href="../../stylesheets/gist.css">
    
      <link rel="stylesheet" href="../../stylesheets/code-highlighting.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
   <link href="../../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
    html.glightbox-open { overflow: initial; height: 100%; }
    .gslide-title { margin-top: 0px; user-select: text; }
    .gslide-desc { color: #666; user-select: text; }
    .gslide-image img { background: white; }
    .gscrollbar-fixer { padding-right: 15px; }
    .gdesc-inner { font-size: 0.75rem; }
    body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
    body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
    body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}</style> <script src="../../assets/javascripts/glightbox.min.js"></script></head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#posts" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="digital garden" class="md-header__button md-logo" aria-label="digital garden" data-md-component="logo">
      
  <img src="../../assets/images/sheldon-avatar.jpg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            digital garden
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              posts
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/sheldonhull/digital-garden" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../welcome/" class="md-tabs__link">
        
  
    
  
  home

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
    
  
  posts

      </a>
    </li>
  

      
        
  
  
  
    
    
      
  
  
  
    
    
      
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../development/tooling/task/" class="md-tabs__link">
          
  
    
  
  notes

        </a>
      </li>
    
  

    
  

    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../2023/" class="md-tabs__link">
          
  
    
  
  archive

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
                
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" hidden>
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="digital garden" class="md-nav__button md-logo" aria-label="digital garden" data-md-component="logo">
      
  <img src="../../assets/images/sheldon-avatar.jpg" alt="logo">

    </a>
    digital garden
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/sheldonhull/digital-garden" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../welcome/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    
      
    
  
  
    <li class="md-nav__item">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    posts
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="../.." class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    posts
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#sql-server-meets-aws-systems-manager" class="md-nav__link">
    <span class="md-ellipsis">
      SQL Server Meets AWS Systems Manager
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-aws-sdk-with-go-for-ec2-ami-metrics" class="md-nav__link">
    <span class="md-ellipsis">
      Using AWS SDK With Go for EC2 AMI Metrics
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#five" class="md-nav__link">
    <span class="md-ellipsis">
      Five
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#leave-me-alone" class="md-nav__link">
    <span class="md-ellipsis">
      Leave Me Alone
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#go-r1-day-17" class="md-nav__link">
    <span class="md-ellipsis">
      Go R1 Day 17
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#go-r1-day-16" class="md-nav__link">
    <span class="md-ellipsis">
      Go R1 Day 16
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#filtering-results-in-go" class="md-nav__link">
    <span class="md-ellipsis">
      Filtering Results in Go
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#go-r1-day-15" class="md-nav__link">
    <span class="md-ellipsis">
      Go R1 Day 15
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#go-r1-day-14" class="md-nav__link">
    <span class="md-ellipsis">
      Go R1 Day 14
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#go-r1-day-14" class="md-nav__link">
    <span class="md-ellipsis">
      Go R1 Day 14
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    notes
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            notes
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../development/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Development
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3_1" id="__nav_3_1_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_1">
            <span class="md-nav__icon md-icon"></span>
            Development
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
          
        
      
        
      
        
      
        
      
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1_1" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../development/tooling/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Tooling
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3_1_1" id="__nav_3_1_1_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_1_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_1_1">
            <span class="md-nav__icon md-icon"></span>
            Tooling
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../development/tooling/task/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    task
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../development/tooling/precommit/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    precommit
  </span>
  

      </a>
    </li>
  

              
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../development/tooling/git/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    git
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../development/tooling/docker/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    docker
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../development/tooling/direnv/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    direnv
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../development/tooling/aqua/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    aqua
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
          
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1_2" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../development/shell/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Shell
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3_1_2" id="__nav_3_1_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_1_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_1_2">
            <span class="md-nav__icon md-icon"></span>
            Shell
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../development/shell/shell/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    shell
  </span>
  

      </a>
    </li>
  

              
            
              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
          
        
      
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1_3" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../development/powershell/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Powershell
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3_1_3" id="__nav_3_1_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_1_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_1_3">
            <span class="md-nav__icon md-icon"></span>
            Powershell
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../development/powershell/powershell/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    powershell
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../development/powershell/pester/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Pester
  </span>
  

      </a>
    </li>
  

              
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../development/powershell/dbatools/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    dbatools
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../development/observability/observability/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    observability
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../development/level-up/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Level-Up
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../development/kubernetes/kubernetes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    kubernetes
  </span>
  

      </a>
    </li>
  

              
            
              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1_8" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../development/go/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Go
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3_1_8" id="__nav_3_1_8_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_1_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_1_8">
            <span class="md-nav__icon md-icon"></span>
            Go
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../development/go/vscode-configuration/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    VSCode Configuration for Go
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../development/go/using-go-tools/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Using Go Tools
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../development/go/testing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Go Testing
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../development/go/pre-commit/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Pre-Commit
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../development/go/modules/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Go Modules
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../development/go/mage/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Mage
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../development/go/logging/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Go Logging
  </span>
  

      </a>
    </li>
  

              
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../development/go/http/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    HTTP
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../development/go/goroutines/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    goroutines
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../development/go/go/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    go
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../development/go/effective-go/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Effective Go
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../development/go/dagger/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Dagger
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../development/go/code-coverage/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Code Coverage
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
          
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1_9" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../development/front-end/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Front end
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3_1_9" id="__nav_3_1_9_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_1_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_1_9">
            <span class="md-nav__icon md-icon"></span>
            Front end
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../development/front-end/yarn/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Yarn
  </span>
  

      </a>
    </li>
  

              
            
              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
          
        
      
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1_10" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../development/build-release-engineering/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Build release engineering
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3_1_10" id="__nav_3_1_10_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_1_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_1_10">
            <span class="md-nav__icon md-icon"></span>
            Build release engineering
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../development/build-release-engineering/renovate/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    renovate
  </span>
  

      </a>
    </li>
  

              
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../development/build-release-engineering/azure-pipelines/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Azure Pipelines
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
          
        
      
        
      
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1_11" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../development/aws/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Aws
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3_1_11" id="__nav_3_1_11_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_1_11_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_1_11">
            <span class="md-nav__icon md-icon"></span>
            Aws
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../development/aws/s5cmd/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Syncing Files Using S5Cmd
  </span>
  

      </a>
    </li>
  

              
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../development/aws/aws-powershell/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    AWS PowerShell
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../development/aws/aws-cli/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    aws-cli
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1_12" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../development/ai/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Ai
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3_1_12" id="__nav_3_1_12_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_1_12_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_1_12">
            <span class="md-nav__icon md-icon"></span>
            Ai
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../development/ai/copilot/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    copilot
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../development/ai/chat/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    chat
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2" >
        
          
          <label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Career
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2">
            <span class="md-nav__icon md-icon"></span>
            Career
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../career/management-dynamics/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Management Dynamics
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../career/eponymous-laws/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Eponymous Laws
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../career/engineering-culture/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Engineering Culture
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../career/communication/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Communication
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    archive
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            archive
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../2023/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2023
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../2022/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2022
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../2021/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2021
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../2020/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2020
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../2019/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2019
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../2018/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2018
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../2017/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2017
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../2016/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2016
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../2015/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2015
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../2014/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2014
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../2013/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2013
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
                
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#sql-server-meets-aws-systems-manager" class="md-nav__link">
    <span class="md-ellipsis">
      SQL Server Meets AWS Systems Manager
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-aws-sdk-with-go-for-ec2-ami-metrics" class="md-nav__link">
    <span class="md-ellipsis">
      Using AWS SDK With Go for EC2 AMI Metrics
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#five" class="md-nav__link">
    <span class="md-ellipsis">
      Five
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#leave-me-alone" class="md-nav__link">
    <span class="md-ellipsis">
      Leave Me Alone
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#go-r1-day-17" class="md-nav__link">
    <span class="md-ellipsis">
      Go R1 Day 17
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#go-r1-day-16" class="md-nav__link">
    <span class="md-ellipsis">
      Go R1 Day 16
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#filtering-results-in-go" class="md-nav__link">
    <span class="md-ellipsis">
      Filtering Results in Go
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#go-r1-day-15" class="md-nav__link">
    <span class="md-ellipsis">
      Go R1 Day 15
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#go-r1-day-14" class="md-nav__link">
    <span class="md-ellipsis">
      Go R1 Day 14
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#go-r1-day-14" class="md-nav__link">
    <span class="md-ellipsis">
      Go R1 Day 14
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
  <div class="md-content" data-md-component="content">
    <div class="md-content__inner">
      <header class="md-typeset">
        <h1 id="posts">posts<a class="headerlink" href="#posts" title="Permanent link">ðŸ”—</a></h1>
      </header>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2020-12-16 00:00:00">December 16, 2020</time></li>
        
        
          
          <li class="md-meta__item">
            
              2 min read
            
          </li>
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="sql-server-meets-aws-systems-manager"><a class="toclink" href="../../sql-server-meets-aws-systems-manager/">SQL Server Meets AWS Systems Manager</a></h2>
<p>Excited. Have a new solution in the works to deploy Ola Hallengren via SSM Automation runbook across all SQL Server instances with full scheduling and synchronization to S3. Hoping to get the ok to publish this soon, as I haven't seen anything like this built.</p>
<p>Includes:</p>
<ul>
<li>Building SSM Automation YAML doc from a PS1 file using AST &amp; metadata</li>
<li>Download dependencies from s3 automatically</li>
<li>Credentials pulled automatically via AWS Parameter Store (could be adapted to Secrets Manager as well)</li>
<li>Leverage <a href="https://github.com/peak/s5cmd">s5cmd</a> for roughly 40x faster sync performance with no <code>aws-cli</code> required. It's a Go executable. #ilovegolang</li>
<li>Deployment of a job that automates flipping instances to <code>FULL</code> or <code>SIMPLE</code> recovery similar to how RDS does this, for those cases where you can't control the creation scripts and want to flip SIMPLE to full for immediate backups.</li>
<li>Formatted deployment summary card sent with all properties to Microsoft Teams. #imissslack</li>
<li>Management of these docs via terraform.</li>
<li>Snippet for the setup of an S3 lifecycle policy automatically cleanup old backups. (prefer terraform, but this is still good to know for retro-active fixes)</li>
</ul>
<p>I'm pretty proud of this being done, as it is replacing Cloudberry, which has a lot of trouble at scale in my experience. I've seen a lot of issues with Cloudberry when dealing with 1000-3000 databases on a server.</p>
<p>Once I get things running, I'll see if I can get this shared in full since it's dbatools + Ola Hallengren Backup Solution driven.</p>
<p>Also plan on adding a few things like on failure send a PagerDuty incident and other little enhancements to possible enable better response handling.</p>
<h3 id="other-resources"><a class="toclink" href="../../sql-server-meets-aws-systems-manager/#other-resources">Other Resources</a></h3>
<ul>
<li><a href="https://dbatools.io/">dbatools</a></li>
<li><a href="https://ola.hallengren.com/sql-server-backup.html">Ola Hallengren</a></li>
<li><a href="https://docs.aws.amazon.com/systems-manager/latest/userguide/automation-documents.html">AWS Docs on Automation Runbooks</a></li>
<li><a href="https://github.com/peak/s5cmd">s5cmd</a></li>
<li><a href="https://github.com/aws-quickstart/quickstart-microsoft-sql">AWS Quick Start for Microsoft SQL Server</a></li>
</ul>
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2020-12-07 00:00:00">December 7, 2020</time></li>
        
        
          
          <li class="md-meta__item">
            
              7 min read
            
          </li>
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="using-aws-sdk-with-go-for-ec2-ami-metrics"><a class="toclink" href="../../using-aws-sdk-with-go-for-ec2-ami-metrics/">Using AWS SDK With Go for EC2 AMI Metrics</a></h2>
<h3 id="source"><a class="toclink" href="../../using-aws-sdk-with-go-for-ec2-ami-metrics/#source">Source</a></h3>
<p>The source code for this repo is located here:</p>
<div class="github-card" data-github="sheldonhull/go-aws-ami-metrics" data-width="400" data-height="" data-theme="default"></div>
<script src="//cdn.jsdelivr.net/github-cards/latest/widget.js"></script>

<h3 id="what-this-is"><a class="toclink" href="../../using-aws-sdk-with-go-for-ec2-ami-metrics/#what-this-is">What This Is</a></h3>
<p>This is a quick overview of some AWS SDK Go work, but not a detailed tutorial.
I'd love feedback from more experienced Go devs as well.</p>
<p>Feel free to submit a PR with tweaks or suggestions, or just comment at the bottom (which is a GitHub issue powered comment system anyway).</p>
<h3 id="image-age"><a class="toclink" href="../../using-aws-sdk-with-go-for-ec2-ami-metrics/#image-age">Image Age</a></h3>
<p>Good metrics can help drive change. If you identify metrics that help you quantify areas of progress in your DevOps process, you'll have a chance to show the progress made and chart the wins.</p>
<p>Knowing the age of the image underlying your instances could be useful if you wanted to measure how often instances were being built and rebuilt.</p>
<p>I'm a big fan of making instances as immutable as possible, with less reliance on changes applied by configuration management and build oriented pipelines, and more baked into the image itself.</p>
<p>Even if you don't build everything into your image and are just doing "golden images", you'll still benefit from seeing the average age of images used go down.
This would represent more continual rebuilds of your infrastructure.
Containerization removes a lot of these concerns, but not everyone is in a place to go straight to containerization for all deployments yet.</p>
<h3 id="what-using-the-sdk-covers"><a class="toclink" href="../../using-aws-sdk-with-go-for-ec2-ami-metrics/#what-using-the-sdk-covers">What Using the SDK Covers</a></h3>
<p>I decided this would be a good chance to use Go as the task is relatively simple and I already know how I'd accomplish this in PowerShell.</p>
<p>If you are also on this journey, maybe you'll find this detail inspiring to help you get some practical application in Go.</p>
<p>There are a few steps that would be required:</p>
<ol>
<li>Connection &amp; Authorization</li>
<li>Obtain a List of Images<ol>
<li>Filtering required</li>
</ol>
</li>
<li>Obtain List of Instances</li>
<li>Match Images to Instances where possible</li>
<li>Produce artifact in file form</li>
</ol>
<p>Warning... I discovered that the SDK is pretty noisy and probably makes things a bit tougher than just plain idiomatic Go.</p>
<p>If you want to learn pointers and derefrencing with Go... you'll be a pro by the time you are done with it ðŸ˜‚</p>
<p><img alt="Everyone Gets a Pointers According to SpongeBob" src="../../2020/images/12-03-10-19-40-pointers-for-everyone.png" /></p>
<h3 id="why-this-could-be-useful-in-learning-more-go"><a class="toclink" href="../../using-aws-sdk-with-go-for-ec2-ami-metrics/#why-this-could-be-useful-in-learning-more-go">Why This Could Be Useful In Learning More Go</a></h3>
<p>I think this is a pretty great small metric oriented collector focus as it ties in with several areas worth future versions.</p>
<p>Since the overall logic is simple there's less need to focus on understanding AWS and more on leveraging different Go features.</p>
<ol>
<li>Version 1: MVP that just products a JSON artifact</li>
<li>Version 2: Wrap up in lambda collector and product s3 artifact</li>
<li>Version 3: Persist metrics to Cloudwatch instead as a metric</li>
<li>Version 4: Datadog or Telegraf plugin</li>
</ol>
<p>From the initial iteration I'll post, there's quite a bit of room for even basic improvement that my quick and dirty solution didn't implement.</p>
<ol>
<li>Use channels to run parallel sessions to collect multi-region metrics in less time</li>
<li>Use sorting with the structs properly would probably cut down on overhead and execution time dramatically.</li>
<li>Timeseries metrics output for Cloudwatch, Datadog, or Telegraf</li>
</ol>
<h3 id="caveat"><a class="toclink" href="../../using-aws-sdk-with-go-for-ec2-ami-metrics/#caveat">Caveat</a></h3>
<ol>
<li>Still learning Go. Posting this up and welcome any pull requests or comments (comments will open GitHubub issue automatically).</li>
<li>There is no proper isolation of functions and tests applied. I've determined it's better to produce and get some volume under my belt that focus on immediately making everything best practices.
Once I've gotten more familiar with Go proper structure, removing logic from <code>main()</code> and more will be important.</li>
<li>This is not a complete walkthrough of all concepts, more a few things I found interesting along the way.</li>
</ol>
<h3 id="some-observations-notes-on-v1-attempt"><a class="toclink" href="../../using-aws-sdk-with-go-for-ec2-ami-metrics/#some-observations-notes-on-v1-attempt">Some Observations &amp; Notes On V1 Attempt</a></h3>
<h4 id="omitempty"><a class="toclink" href="../../using-aws-sdk-with-go-for-ec2-ami-metrics/#omitempty">omitempty</a></h4>
<p>Writing to JSON is pretty straight forward, but what I found interesting was handling null values.</p>
<p>If you don't want the default initialized value from the data type to be populated, then you need to specific additional attributes in your struct to let it know how to properly serialize the data.</p>
<p>For instance, I didn't want to populate a null value for <code>AmiAge</code> as <code>0</code> would mess up any averages you were trying to calculate.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="kd">type</span><span class="w"> </span><span class="nx">ReportAmiAging</span><span class="w"> </span><span class="kd">struct</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a><span class="w">    </span><span class="nx">Region</span><span class="w">             </span><span class="kt">string</span><span class="w">     </span><span class="s">`json:&quot;region&quot;`</span>
<a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a><span class="w">    </span><span class="nx">InstanceID</span><span class="w">         </span><span class="kt">string</span><span class="w">     </span><span class="s">`json:&quot;instance-id&quot;`</span>
<a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a><span class="w">    </span><span class="nx">AmiID</span><span class="w">              </span><span class="kt">string</span><span class="w">     </span><span class="s">`json:&quot;image-id&quot;`</span>
<a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a><span class="w">    </span><span class="nx">ImageName</span><span class="w">          </span><span class="o">*</span><span class="kt">string</span><span class="w">    </span><span class="s">`json:&quot;image-name,omitempty&quot;`</span>
<a id="__codelineno-7-6" name="__codelineno-7-6" href="#__codelineno-7-6"></a><span class="w">    </span><span class="nx">PlatformDetails</span><span class="w">    </span><span class="o">*</span><span class="kt">string</span><span class="w">    </span><span class="s">`json:&quot;platform-details,omitempty&quot;`</span>
<a id="__codelineno-7-7" name="__codelineno-7-7" href="#__codelineno-7-7"></a><span class="w">    </span><span class="nx">InstanceCreateDate</span><span class="w"> </span><span class="o">*</span><span class="nx">time</span><span class="p">.</span><span class="nx">Time</span><span class="w"> </span><span class="s">`json:&quot;instance-create-date&quot;`</span>
<a id="__codelineno-7-8" name="__codelineno-7-8" href="#__codelineno-7-8"></a><span class="w">    </span><span class="nx">AmiCreateDate</span><span class="w">      </span><span class="o">*</span><span class="nx">time</span><span class="p">.</span><span class="nx">Time</span><span class="w"> </span><span class="s">`json:&quot;ami-create-date,omitempty&quot;`</span>
<a id="__codelineno-7-9" name="__codelineno-7-9" href="#__codelineno-7-9"></a><span class="w">    </span><span class="nx">AmiAgeDays</span><span class="w">         </span><span class="o">*</span><span class="kt">int</span><span class="w">       </span><span class="s">`json:&quot;ami-age-days,omitempty&quot;`</span>
<a id="__codelineno-7-10" name="__codelineno-7-10" href="#__codelineno-7-10"></a><span class="p">}</span>
</code></pre></div>
<p>In this case, I just set <code>omitempty</code> and it would set to null if I passed in a pointer to the value. For a much more detailed walk-through of this:  <a href="https://www.sohamkamani.com/golang/2018-07-19-golang-omitempty/">Go's Emit Empty Explained</a></p>
<h4 id="multi-region"><a class="toclink" href="../../using-aws-sdk-with-go-for-ec2-ami-metrics/#multi-region">Multi-Region</a></h4>
<p>Here things got a little confusing as I wanted to run this concurrently, but shelved that for v1 to deliver results more quickly.</p>
<p>To initialize a new session, I provided my starting point.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="nx">sess</span><span class="p">,</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">session</span><span class="p">.</span><span class="nx">NewSession</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">aws</span><span class="p">.</span><span class="nx">Config</span><span class="p">{</span>
<a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a><span class="w">        </span><span class="nx">Region</span><span class="p">:</span><span class="w"> </span><span class="nx">aws</span><span class="p">.</span><span class="nx">String</span><span class="p">(</span><span class="s">&quot;eu-west-1&quot;</span><span class="p">),</span>
<a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a><span class="w">        </span><span class="p">},</span>
<a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a><span class="p">)</span>
<a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a><span class="k">if</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">nil</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-8-6" name="__codelineno-8-6" href="#__codelineno-8-6"></a><span class="w">    </span><span class="nx">log</span><span class="p">.</span><span class="nx">Err</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span>
<a id="__codelineno-8-7" name="__codelineno-8-7" href="#__codelineno-8-7"></a><span class="p">}</span>
<a id="__codelineno-8-8" name="__codelineno-8-8" href="#__codelineno-8-8"></a><span class="nx">log</span><span class="p">.</span><span class="nx">Info</span><span class="p">().</span><span class="nx">Str</span><span class="p">(</span><span class="s">&quot;region&quot;</span><span class="p">,</span><span class="w"> </span><span class="nb">string</span><span class="p">(</span><span class="o">*</span><span class="nx">sess</span><span class="p">.</span><span class="nx">Config</span><span class="p">.</span><span class="nx">Region</span><span class="p">)).</span><span class="nx">Msg</span><span class="p">(</span><span class="s">&quot;initialized new session successfully&quot;</span><span class="p">)</span>
</code></pre></div>
<p>Next, I had to gather all the regions.
In my scenario, I wanted to add flexibility to ignore regions that were not opted into, to allow less regions to be covered when this setting was correctly used in AWS.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="c1">// Create EC2 service client</span>
<a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a><span class="nx">client</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">ec2</span><span class="p">.</span><span class="nx">New</span><span class="p">(</span><span class="nx">sess</span><span class="p">)</span>
<a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a><span class="nx">regions</span><span class="p">,</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">client</span><span class="p">.</span><span class="nx">DescribeRegions</span><span class="p">(</span><span class="o">&amp;</span><span class="nx">ec2</span><span class="p">.</span><span class="nx">DescribeRegionsInput</span><span class="p">{</span>
<a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a><span class="w">    </span><span class="nx">AllRegions</span><span class="p">:</span><span class="w"> </span><span class="nx">aws</span><span class="p">.</span><span class="nx">Bool</span><span class="p">(</span><span class="kc">true</span><span class="p">),</span><span class="w"> </span><span class="nx">Filters</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="o">*</span><span class="nx">ec2</span><span class="p">.</span><span class="nx">Filter</span><span class="p">{</span>
<a id="__codelineno-9-5" name="__codelineno-9-5" href="#__codelineno-9-5"></a><span class="w">        </span><span class="p">{</span>
<a id="__codelineno-9-6" name="__codelineno-9-6" href="#__codelineno-9-6"></a><span class="w">            </span><span class="nx">Name</span><span class="p">:</span><span class="w">   </span><span class="nx">aws</span><span class="p">.</span><span class="nx">String</span><span class="p">(</span><span class="s">&quot;opt-in-status&quot;</span><span class="p">),</span>
<a id="__codelineno-9-7" name="__codelineno-9-7" href="#__codelineno-9-7"></a><span class="w">            </span><span class="nx">Values</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="o">*</span><span class="kt">string</span><span class="p">{</span><span class="nx">aws</span><span class="p">.</span><span class="nx">String</span><span class="p">(</span><span class="s">&quot;opted-in&quot;</span><span class="p">),</span><span class="w"> </span><span class="nx">aws</span><span class="p">.</span><span class="nx">String</span><span class="p">(</span><span class="s">&quot;opt-in-not-required&quot;</span><span class="p">)},</span>
<a id="__codelineno-9-8" name="__codelineno-9-8" href="#__codelineno-9-8"></a><span class="w">        </span><span class="p">},</span>
<a id="__codelineno-9-9" name="__codelineno-9-9" href="#__codelineno-9-9"></a><span class="w">    </span><span class="p">},</span>
<a id="__codelineno-9-10" name="__codelineno-9-10" href="#__codelineno-9-10"></a><span class="p">},</span>
<a id="__codelineno-9-11" name="__codelineno-9-11" href="#__codelineno-9-11"></a><span class="w">                                      </span><span class="p">)</span>
<a id="__codelineno-9-12" name="__codelineno-9-12" href="#__codelineno-9-12"></a><span class="k">if</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">nil</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-9-13" name="__codelineno-9-13" href="#__codelineno-9-13"></a><span class="w">    </span><span class="nx">log</span><span class="p">.</span><span class="nx">Err</span><span class="p">(</span><span class="nx">err</span><span class="p">).</span><span class="nx">Msg</span><span class="p">(</span><span class="s">&quot;Failed to parse regions&quot;</span><span class="p">)</span>
<a id="__codelineno-9-14" name="__codelineno-9-14" href="#__codelineno-9-14"></a><span class="w">    </span><span class="nx">os</span><span class="p">.</span><span class="nx">Exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<a id="__codelineno-9-15" name="__codelineno-9-15" href="#__codelineno-9-15"></a><span class="p">}</span>
</code></pre></div>
<p>The filter syntax is pretty ugly.
Due to the way the SDK works, you can't just pass in <code>*[]string{"opted-in","opt-in-not-required}</code> and then reference this.
Instead, you have to set the AWS functions to create pointers to the strings and then dereference.
Deep diving into this further was beyond my time allotted, but made my first usage feel somewhat clunky.</p>
<p>After gathering the regions you'd iterate and create a new session per region similar to this.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="k">for</span><span class="w"> </span><span class="nx">_</span><span class="p">,</span><span class="w"> </span><span class="nx">region</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="k">range</span><span class="w"> </span><span class="nx">regions</span><span class="p">.</span><span class="nx">Regions</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a><span class="w">        </span><span class="nx">log</span><span class="p">.</span><span class="nx">Info</span><span class="p">().</span><span class="nx">Str</span><span class="p">(</span><span class="s">&quot;region&quot;</span><span class="p">,</span><span class="w"> </span><span class="o">*</span><span class="nx">region</span><span class="p">.</span><span class="nx">RegionName</span><span class="p">).</span><span class="nx">Msg</span><span class="p">(</span><span class="s">&quot;--&gt; processing region&quot;</span><span class="p">)</span>
<a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a><span class="w">        </span><span class="nx">client</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">ec2</span><span class="p">.</span><span class="nx">New</span><span class="p">(</span><span class="nx">sess</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="nx">aws</span><span class="p">.</span><span class="nx">Config</span><span class="p">{</span><span class="nx">Region</span><span class="p">:</span><span class="w"> </span><span class="o">*&amp;</span><span class="nx">region</span><span class="p">.</span><span class="nx">RegionName</span><span class="p">})</span>
<a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a><span class="w">    </span><span class="c1">// Do your magic</span>
<a id="__codelineno-10-5" name="__codelineno-10-5" href="#__codelineno-10-5"></a><span class="p">}</span>
</code></pre></div>
<h4 id="structured-logging"><a class="toclink" href="../../using-aws-sdk-with-go-for-ec2-ami-metrics/#structured-logging">Structured Logging</a></h4>
<p>I've blogged about this before (mostly on microblog).</p>
<p>As a newer gopher, I've found that <a href="https://github.com/rs/zerolog">zerolog</a> is pretty intuitive.</p>
<p>Structured logging is really important to being able to use log tools and get more value out of your logs in the future, so I personally like the idea of starting with them from the beginning.</p>
<p>Here you could see how you can provide name value pairs, along with the message.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="nx">log</span><span class="p">.</span><span class="nx">Info</span><span class="p">().</span><span class="nx">Int</span><span class="p">(</span><span class="s">&quot;result_count&quot;</span><span class="p">,</span><span class="w"> </span><span class="nb">len</span><span class="p">(</span><span class="nx">respInstances</span><span class="p">.</span><span class="nx">Reservations</span><span class="p">)).</span><span class="nx">Dur</span><span class="p">(</span><span class="s">&quot;duration&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">time</span><span class="p">.</span><span class="nx">Since</span><span class="p">(</span><span class="nx">start</span><span class="p">)).</span><span class="nx">Msg</span><span class="p">(</span><span class="s">&quot;\tresults returned for ec2instances&quot;</span><span class="p">)</span>
</code></pre></div>
<p>Using this provided some nice readable console feedback, along with values that a tool like Datadog's log parser could turn into values you could easily make metrics from.</p>
<h4 id="performance-in-searching"><a class="toclink" href="../../using-aws-sdk-with-go-for-ec2-ami-metrics/#performance-in-searching">Performance In Searching</a></h4>
<p>From my prior blog post <a href="../../filtering-results-in-go/" title="Filtering Results In Go">Filtering Results In Go</a> I also talked about this.</p>
<p>The lack of syntactic sugar in Go means this seemed much more verbose than I was expecting.</p>
<p>A few key things I observed here were:</p>
<ol>
<li>Important to set your default layout for time if you want any consistency.</li>
<li>Sorting algorithms, or even just basic sorting, would likely reduce the overall cost of a search like this (I'm better pretty dramatically)</li>
<li>Pointers. Everywhere. Coming from a dynamic scripting language like PowerShell/Python, this is a different paradigm.
I'm used to isolated functions which have less focus on passing values to modify directly (by value).
In .NET you can pass in variables by reference, which is similar in concept, but it's not something I found a lot of use for in scripting.
I can see the massive benefits when at scale though, as avoiding more memory grants by using existing memory allocations with pointers would be much more efficient. Just have to get used to it!</li>
</ol>
<div class="highlight"><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a><span class="c1">// GetMatchingImage will search the ami results for a matching id</span>
<a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a><span class="kd">func</span><span class="w"> </span><span class="nx">GetMatchingImage</span><span class="p">(</span><span class="nx">imgs</span><span class="w"> </span><span class="p">[]</span><span class="o">*</span><span class="nx">ec2</span><span class="p">.</span><span class="nx">Image</span><span class="p">,</span><span class="w"> </span><span class="nx">search</span><span class="w"> </span><span class="o">*</span><span class="kt">string</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="nx">parsedTime</span><span class="w"> </span><span class="nx">time</span><span class="p">.</span><span class="nx">Time</span><span class="p">,</span><span class="w"> </span><span class="nx">imageName</span><span class="w"> </span><span class="kt">string</span><span class="p">,</span><span class="w"> </span><span class="nx">platformDetails</span><span class="w"> </span><span class="kt">string</span><span class="p">,</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="kt">error</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a><span class="w">    </span><span class="nx">layout</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">time</span><span class="p">.</span><span class="nx">RFC3339</span><span class="w"> </span><span class="c1">//&quot;2006-01-02T15:04:05.000Z&quot;</span>
<a id="__codelineno-12-4" name="__codelineno-12-4" href="#__codelineno-12-4"></a><span class="w">    </span><span class="nx">log</span><span class="p">.</span><span class="nx">Debug</span><span class="p">().</span><span class="nx">Msgf</span><span class="p">(</span><span class="s">&quot;\t\t\tsearching for: %s&quot;</span><span class="p">,</span><span class="w"> </span><span class="o">*</span><span class="nx">search</span><span class="p">)</span>
<a id="__codelineno-12-5" name="__codelineno-12-5" href="#__codelineno-12-5"></a><span class="w">    </span><span class="c1">// Look up the matching image</span>
<a id="__codelineno-12-6" name="__codelineno-12-6" href="#__codelineno-12-6"></a><span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="nx">_</span><span class="p">,</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="k">range</span><span class="w"> </span><span class="nx">imgs</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-12-7" name="__codelineno-12-7" href="#__codelineno-12-7"></a><span class="w">        </span><span class="nx">log</span><span class="p">.</span><span class="nx">Trace</span><span class="p">().</span><span class="nx">Msgf</span><span class="p">(</span><span class="s">&quot;\t\t\t%s &lt;--&gt; %s&quot;</span><span class="p">,</span><span class="w"> </span><span class="o">*</span><span class="nx">i</span><span class="p">.</span><span class="nx">ImageId</span><span class="p">,</span><span class="w"> </span><span class="o">*</span><span class="nx">search</span><span class="p">)</span>
<a id="__codelineno-12-8" name="__codelineno-12-8" href="#__codelineno-12-8"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="nx">strings</span><span class="p">.</span><span class="nx">ToLower</span><span class="p">(</span><span class="o">*</span><span class="nx">i</span><span class="p">.</span><span class="nx">ImageId</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nx">strings</span><span class="p">.</span><span class="nx">ToLower</span><span class="p">(</span><span class="o">*</span><span class="nx">search</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-12-9" name="__codelineno-12-9" href="#__codelineno-12-9"></a><span class="w">            </span><span class="nx">log</span><span class="p">.</span><span class="nx">Trace</span><span class="p">().</span><span class="nx">Msgf</span><span class="p">(</span><span class="s">&quot;\t\t\t %s == %s&quot;</span><span class="p">,</span><span class="w"> </span><span class="o">*</span><span class="nx">i</span><span class="p">.</span><span class="nx">ImageId</span><span class="p">,</span><span class="w"> </span><span class="o">*</span><span class="nx">search</span><span class="p">)</span>
<a id="__codelineno-12-10" name="__codelineno-12-10" href="#__codelineno-12-10"></a>
<a id="__codelineno-12-11" name="__codelineno-12-11" href="#__codelineno-12-11"></a><span class="w">            </span><span class="nx">p</span><span class="p">,</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">time</span><span class="p">.</span><span class="nx">Parse</span><span class="p">(</span><span class="nx">layout</span><span class="p">,</span><span class="w"> </span><span class="o">*</span><span class="nx">i</span><span class="p">.</span><span class="nx">CreationDate</span><span class="p">)</span>
<a id="__codelineno-12-12" name="__codelineno-12-12" href="#__codelineno-12-12"></a><span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">nil</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-12-13" name="__codelineno-12-13" href="#__codelineno-12-13"></a><span class="w">                </span><span class="nx">log</span><span class="p">.</span><span class="nx">Err</span><span class="p">(</span><span class="nx">err</span><span class="p">).</span><span class="nx">Msg</span><span class="p">(</span><span class="s">&quot;\t\t\tfailed to parse date from image i.CreationDate&quot;</span><span class="p">)</span>
<a id="__codelineno-12-14" name="__codelineno-12-14" href="#__codelineno-12-14"></a><span class="w">            </span><span class="p">}</span>
<a id="__codelineno-12-15" name="__codelineno-12-15" href="#__codelineno-12-15"></a><span class="w">            </span><span class="nx">log</span><span class="p">.</span><span class="nx">Debug</span><span class="p">().</span><span class="nx">Str</span><span class="p">(</span><span class="s">&quot;i.CreationDate&quot;</span><span class="p">,</span><span class="w"> </span><span class="o">*</span><span class="nx">i</span><span class="p">.</span><span class="nx">CreationDate</span><span class="p">).</span><span class="nx">Str</span><span class="p">(</span><span class="s">&quot;parsedTime&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">p</span><span class="p">.</span><span class="nx">String</span><span class="p">()).</span><span class="nx">Msg</span><span class="p">(</span><span class="s">&quot;\t\t\tami-create-date result&quot;</span><span class="p">)</span>
<a id="__codelineno-12-16" name="__codelineno-12-16" href="#__codelineno-12-16"></a><span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="nx">p</span><span class="p">,</span><span class="w"> </span><span class="o">*</span><span class="nx">i</span><span class="p">.</span><span class="nx">Name</span><span class="p">,</span><span class="w"> </span><span class="o">*</span><span class="nx">i</span><span class="p">.</span><span class="nx">PlatformDetails</span><span class="p">,</span><span class="w"> </span><span class="kc">nil</span>
<a id="__codelineno-12-17" name="__codelineno-12-17" href="#__codelineno-12-17"></a><span class="w">            </span><span class="c1">// break</span>
<a id="__codelineno-12-18" name="__codelineno-12-18" href="#__codelineno-12-18"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-12-19" name="__codelineno-12-19" href="#__codelineno-12-19"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-12-20" name="__codelineno-12-20" href="#__codelineno-12-20"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">parsedTime</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">errors</span><span class="p">.</span><span class="nx">New</span><span class="p">(</span><span class="s">&quot;\t\t\tno matching ami found&quot;</span><span class="p">)</span>
<a id="__codelineno-12-21" name="__codelineno-12-21" href="#__codelineno-12-21"></a><span class="p">}</span>
</code></pre></div>
<h4 id="multiple-return-properties"><a class="toclink" href="../../using-aws-sdk-with-go-for-ec2-ami-metrics/#multiple-return-properties">Multiple Return Properties</a></h4>
<p>While this can be done in PowerShell, I rarely did it in the manner Go does.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a><span class="nx">amiCreateDate</span><span class="p">,</span><span class="w"> </span><span class="nx">ImageName</span><span class="p">,</span><span class="w"> </span><span class="nx">platformDetails</span><span class="p">,</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">GetMatchingImage</span><span class="p">(</span><span class="nx">respPrivateImages</span><span class="p">.</span><span class="nx">Images</span><span class="p">,</span><span class="w"> </span><span class="nx">inst</span><span class="p">.</span><span class="nx">ImageId</span><span class="p">)</span>
<a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a><span class="k">if</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">nil</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a><span class="w">    </span><span class="nx">log</span><span class="p">.</span><span class="nx">Err</span><span class="p">(</span><span class="nx">err</span><span class="p">).</span><span class="nx">Msg</span><span class="p">(</span><span class="s">&quot;failure to find ami&quot;</span><span class="p">)</span>
<a id="__codelineno-13-4" name="__codelineno-13-4" href="#__codelineno-13-4"></a><span class="p">}</span>
</code></pre></div>
<h3 id="feedback-welcome"><a class="toclink" href="../../using-aws-sdk-with-go-for-ec2-ami-metrics/#feedback-welcome">Feedback Welcome</a></h3>
<p>As stated, feedback welcome from any more experienced Gophers would be welcome.
Anything for round 2.</p>
<p>Goals for that will be at a minimum:</p>
<ol>
<li>Use <code>go test</code>  to run.</li>
<li>Isolate main and build basic tests for each function.</li>
<li>Decide to wrap up in lambda or plugin.</li>
</ol>
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2020-12-03 00:00:00">December 3, 2020</time></li>
        
        
          
          <li class="md-meta__item">
            
              1 min read
            
          </li>
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="five"><a class="toclink" href="../../five/">Five</a></h2>
<p>I asked my daughter (3) how much she loved me.
She held up her hands and said: "Five".</p>
<p>I'll take that as a win considering that's all the fingers on that hand. ðŸ˜‚</p>
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2020-12-01 00:00:00">December 1, 2020</time></li>
        
        
          
          <li class="md-meta__item">
            
              2 min read
            
          </li>
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="leave-me-alone"><a class="toclink" href="../../leave-me-alone/">Leave Me Alone</a></h2>
<h3 id="free-means-you-are-the-product"><a class="toclink" href="../../leave-me-alone/#free-means-you-are-the-product">Free Means You Are the Product</a></h3>
<p>Over time, I've begun to look at products that are free with more judgment.
The saying is: "If it's free, you are the product".
This often means your data and privacy are compromised as the product.</p>
<p>This has resulted in me looking more favorably at apps I would have dismissed in the past, such as <a href="https://leavemealone.app/">Leave Me Alone</a>.</p>
<h3 id="leave-me-alone_1"><a class="toclink" href="../../leave-me-alone/#leave-me-alone_1">Leave Me Alone</a></h3>
<p>The notion of buying credits for something I could script, click, or do myself made me use sporadically last year.
This year, I took the plunge and spent $10 and appreciate the concept and cost.</p>
<p>If you have a lot of tech interaction, you'll have a slew of newsletter and marketing subscriptions coming your way.
This noise can drown your email.</p>
<p>I saw one Children's clothing place that got my email on a receipt generate an average of 64 emails a month!</p>
<p>Leave Me Alone helps simplify the cleanup process by simplifying the summary of noisiest offenders, and one-click unsubscribes to any of these.</p>
<p>You can use an automatically generated rating based on ranked value on mailing lists, read engagement, number of emails sent monthly, and more.</p>
<p>Take a look, the free start is enough to figure out if you like it.</p>
<h3 id="other-tools"><a class="toclink" href="../../leave-me-alone/#other-tools">Other Tools</a></h3>
<p>Combine this type of tool with:</p>
<ul>
<li><a href="https://kill-the-newsletter.com/">Kill The Newsletter</a></li>
<li><a href="https://www.inoreader.com/">Inoreader (RSS Reader)</a></li>
<li><a href="https://subscriptionscore.com/">Subscription Score</a>: a really promising tool made by the same folks, but haven't added at this time as price seems a bit high for this specific feature if I'm already using their app. (at this time $49 a year). Be nice if this was a feature provided automatically to those who bought 250 credits or more since it's powered by the data mining of lists users unsubscribe from the most.</li>
</ul>
<p>You'll be more likely to keep up to date with this noise reduced.
Last tip: Add GitHub Release notes like Terraform and others as a subscription in your RSS reader, and it might reduce the noise via email and slack on releases.</p>
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2020-11-19 00:00:00">November 19, 2020</time></li>
        
        
          
          <li class="md-meta__item">
            
              1 min read
            
          </li>
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="go-r1-day-17"><a class="toclink" href="../../go-r1-day-17/">Go R1 Day 17</a></h2>
<h3 id="day-17-of-100"><a class="toclink" href="../../go-r1-day-17/#day-17-of-100">Day 17 of 100</a></h3>
<h3 id="progress"><a class="toclink" href="../../go-r1-day-17/#progress">progress</a></h3>
<ul>
<li>reviewed adding excel conversion to cli</li>
<li>shelved this after reviewing implementation requirements</li>
<li>this is one of those cases where PowerShell makes much more sense for adhoc work as converts <code>pscustomobject</code> (similar to struct) via pipeline automatically to excel sheet.</li>
</ul>
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2020-11-18 00:00:00">November 18, 2020</time></li>
        
        
          
          <li class="md-meta__item">
            
              1 min read
            
          </li>
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="go-r1-day-16"><a class="toclink" href="../../go-r1-day-16/">Go R1 Day 16</a></h2>
<h3 id="day-16-of-100"><a class="toclink" href="../../go-r1-day-16/#day-16-of-100">Day 16 of 100</a></h3>
<h3 id="progress"><a class="toclink" href="../../go-r1-day-16/#progress">progress</a></h3>
<ul>
<li>refactored AWS SDK call to export a named file using flags.</li>
<li>Iterated through regions so cli call aggregated all results from all regions into single JSON.</li>
<li>Working with v1 makes me want v2 so much more.
The level of pointers required is ridiculous.
At one point I had something like <code>&amp;*ec2</code> due to the SDK requirements.
Having to write a filter with: <code>Filters: { Name: aws.String("foo")}</code> is so clunky.
I believe in v2 this is greatly simplified, and the code is much cleaner.</li>
</ul>
<h3 id="links"><a class="toclink" href="../../go-r1-day-16/#links">links</a></h3>
<ul>
<li><a href="https://pkg.go.dev/github.com/aws/aws-sdk-go@v1.35.31/service/ec2#DescribeRegionsInput.GoString">DescribeRegionsInput</a></li>
</ul>
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2020-11-17 00:00:00">November 17, 2020</time></li>
        
        
          
          <li class="md-meta__item">
            
              2 min read
            
          </li>
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="filtering-results-in-go"><a class="toclink" href="../../filtering-results-in-go/">Filtering Results in Go</a></h2>
<h3 id="where-filtering"><a class="toclink" href="../../filtering-results-in-go/#where-filtering">Where Filtering</a></h3>
<p>I explored a bit on filtering objects with Go for the AWS SDK v1.</p>
<p>Coming from PowerShell, I'm used to a lot of one-liners that do a lot of magic behind the scenes, so Go is both refreshing in it's clarity, and a bit verbose at times since the language features are more sparse.</p>
<p>In PowerShell, you can filter results with a variety of methods, including examples like below (but not limited to)</p>
<ul>
<li><code>$collection.Where{$_.Value -eq 'foo'}</code></li>
<li><code>$collection | Where-Object {$_.Value -eq 'foo'}</code></li>
<li><code>$collection | Where-Object Value -eq 'foo'</code></li>
</ul>
<p>When exploring the an unmarshalled result in Go, I found it a bit verbose compared to what I was used to, and wondered if there are no "Where" clause helper libraries that cut down on this verbosity, and also still considered idiomatic (Go's favorite word ðŸ˜ƒ).</p>
<h3 id="scenario"><a class="toclink" href="../../filtering-results-in-go/#scenario">Scenario</a></h3>
<p>Let's get all the EC2 Image results for a region and match these with all the EC2 instances running.
Filter down the results of this to only the ami matching what the EC2 instance is using.</p>
<p>In PowerShell this might look like <code>$AmiId = $Images.Where{$_.ImageId -eq $Search}.ImageId</code>.</p>
<p>As a newer gopher, this is what I ended up doing,and wondering at my solution.
This is without sorting optimization.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="nx">amiCreateDate</span><span class="p">,</span><span class="w"> </span><span class="nx">ImageName</span><span class="p">,</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">GetMatchingImage</span><span class="p">(</span><span class="nx">resp</span><span class="p">.</span><span class="nx">Images</span><span class="p">,</span><span class="w"> </span><span class="nx">inst</span><span class="p">.</span><span class="nx">ImageId</span><span class="p">)</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="k">if</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">nil</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="w">  </span><span class="nx">log</span><span class="p">.</span><span class="nx">Err</span><span class="p">(</span><span class="nx">err</span><span class="p">).</span><span class="nx">Msg</span><span class="p">(</span><span class="s">&quot;failure to find ami&quot;</span><span class="p">)</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="p">}</span>
</code></pre></div>
<p>Then I created a search function to iterate through the images for a match.
Yes, there was a lot of logging as I worked through this.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="c1">// GetMatchingImage will search the ami results for a matching id</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="kd">func</span><span class="w"> </span><span class="nx">GetMatchingImage</span><span class="p">(</span><span class="nx">imgs</span><span class="w"> </span><span class="p">[]</span><span class="o">*</span><span class="nx">ec2</span><span class="p">.</span><span class="nx">Image</span><span class="p">,</span><span class="w"> </span><span class="nx">search</span><span class="w"> </span><span class="o">*</span><span class="kt">string</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="nx">parsedTime</span><span class="w"> </span><span class="nx">time</span><span class="p">.</span><span class="nx">Time</span><span class="p">,</span><span class="w"> </span><span class="nx">imageName</span><span class="w"> </span><span class="kt">string</span><span class="p">,</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="kt">error</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="w">    </span><span class="nx">layout</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">time</span><span class="p">.</span><span class="nx">RFC3339</span><span class="w"> </span><span class="c1">//&quot;2006-01-02T15:04:05.000Z&quot;</span>
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a><span class="w">    </span><span class="nx">log</span><span class="p">.</span><span class="nx">Debug</span><span class="p">().</span><span class="nx">Msgf</span><span class="p">(</span><span class="s">&quot;searching for: %s&quot;</span><span class="p">,</span><span class="w"> </span><span class="o">*</span><span class="nx">search</span><span class="p">)</span>
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a><span class="w">    </span><span class="c1">// Look up the matching image</span>
<a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a><span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="nx">_</span><span class="p">,</span><span class="w"> </span><span class="nx">i</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="k">range</span><span class="w"> </span><span class="nx">imgs</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a><span class="w">        </span><span class="nx">log</span><span class="p">.</span><span class="nx">Trace</span><span class="p">().</span><span class="nx">Msgf</span><span class="p">(</span><span class="s">&quot;\t %s &lt;--&gt; %s&quot;</span><span class="p">,</span><span class="w"> </span><span class="o">*</span><span class="nx">i</span><span class="p">.</span><span class="nx">ImageId</span><span class="p">,</span><span class="w"> </span><span class="o">*</span><span class="nx">search</span><span class="p">)</span>
<a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="nx">strings</span><span class="p">.</span><span class="nx">ToLower</span><span class="p">(</span><span class="o">*</span><span class="nx">i</span><span class="p">.</span><span class="nx">ImageId</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nx">strings</span><span class="p">.</span><span class="nx">ToLower</span><span class="p">(</span><span class="o">*</span><span class="nx">search</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a><span class="w">            </span><span class="nx">log</span><span class="p">.</span><span class="nx">Trace</span><span class="p">().</span><span class="nx">Msgf</span><span class="p">(</span><span class="s">&quot;\t %s == %s&quot;</span><span class="p">,</span><span class="w"> </span><span class="o">*</span><span class="nx">i</span><span class="p">.</span><span class="nx">ImageId</span><span class="p">,</span><span class="w"> </span><span class="o">*</span><span class="nx">search</span><span class="p">)</span>
<a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a>
<a id="__codelineno-1-11" name="__codelineno-1-11" href="#__codelineno-1-11"></a><span class="w">            </span><span class="nx">p</span><span class="p">,</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">time</span><span class="p">.</span><span class="nx">Parse</span><span class="p">(</span><span class="nx">layout</span><span class="p">,</span><span class="w"> </span><span class="o">*</span><span class="nx">i</span><span class="p">.</span><span class="nx">CreationDate</span><span class="p">)</span>
<a id="__codelineno-1-12" name="__codelineno-1-12" href="#__codelineno-1-12"></a><span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">nil</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-1-13" name="__codelineno-1-13" href="#__codelineno-1-13"></a><span class="w">                </span><span class="nx">log</span><span class="p">.</span><span class="nx">Err</span><span class="p">(</span><span class="nx">err</span><span class="p">).</span><span class="nx">Msg</span><span class="p">(</span><span class="s">&quot;failed to parse date from image i.CreationDate&quot;</span><span class="p">)</span>
<a id="__codelineno-1-14" name="__codelineno-1-14" href="#__codelineno-1-14"></a><span class="w">            </span><span class="p">}</span>
<a id="__codelineno-1-15" name="__codelineno-1-15" href="#__codelineno-1-15"></a><span class="w">            </span><span class="nx">log</span><span class="p">.</span><span class="nx">Debug</span><span class="p">().</span><span class="nx">Str</span><span class="p">(</span><span class="s">&quot;i.CreationDate&quot;</span><span class="p">,</span><span class="w"> </span><span class="o">*</span><span class="nx">i</span><span class="p">.</span><span class="nx">CreationDate</span><span class="p">).</span><span class="nx">Str</span><span class="p">(</span><span class="s">&quot;parsedTime&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">p</span><span class="p">.</span><span class="nx">String</span><span class="p">()).</span><span class="nx">Msg</span><span class="p">(</span><span class="s">&quot;ami-create-date result&quot;</span><span class="p">)</span>
<a id="__codelineno-1-16" name="__codelineno-1-16" href="#__codelineno-1-16"></a><span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="nx">p</span><span class="p">,</span><span class="w"> </span><span class="o">*</span><span class="nx">i</span><span class="p">.</span><span class="nx">Name</span><span class="p">,</span><span class="w"> </span><span class="kc">nil</span>
<a id="__codelineno-1-17" name="__codelineno-1-17" href="#__codelineno-1-17"></a><span class="w">            </span><span class="c1">// break</span>
<a id="__codelineno-1-18" name="__codelineno-1-18" href="#__codelineno-1-18"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-1-19" name="__codelineno-1-19" href="#__codelineno-1-19"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-1-20" name="__codelineno-1-20" href="#__codelineno-1-20"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">parsedTime</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">errors</span><span class="p">.</span><span class="nx">New</span><span class="p">(</span><span class="s">&quot;no matching ami found&quot;</span><span class="p">)</span>
<a id="__codelineno-1-21" name="__codelineno-1-21" href="#__codelineno-1-21"></a><span class="p">}</span>
</code></pre></div>
<p>I was impressed with the performance without any optimization of the api calls, and could see that with a proper approach to sorting the image ids I could improve the performance further.
However, the verbosity of doing some filtering to find and return the object was surprising, so I wrote this up to get feedback from other gophers and see what other idiomatic approaches are a solid way to filter down matching properties from result set.</p>
<p>Is there any library used by many to do this type of filtering, or is my .NET background coloring my perspective with dreams of Linq?</p>
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2020-11-13 00:00:00">November 13, 2020</time></li>
        
        
          
          <li class="md-meta__item">
            
              1 min read
            
          </li>
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="go-r1-day-15"><a class="toclink" href="../../go-r1-day-15/">Go R1 Day 15</a></h2>
<h3 id="day-15-of-100"><a class="toclink" href="../../go-r1-day-15/#day-15-of-100">Day 15 of 100</a></h3>
<h3 id="progress"><a class="toclink" href="../../go-r1-day-15/#progress">progress</a></h3>
<ul>
<li>figured out scope issues with pointer and struct</li>
<li>Used <code>omitempty</code> in struct</li>
<li>exported final report in json format after searching for matching image id from ec2 instance image id</li>
<li>Find it interesting how much more wordy the go search method was, but appreciate it in a way as the "syntactic" sugar that's missing also is the reason there is more complication at times in languages like PowerShell/C#.</li>
</ul>
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2020-11-12 00:00:00">November 12, 2020</time></li>
        
        
          
          <li class="md-meta__item">
            
              1 min read
            
          </li>
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="go-r1-day-14"><a class="toclink" href="../../go-r1-day-14/">Go R1 Day 14</a></h2>
<h3 id="day-14-of-100"><a class="toclink" href="../../go-r1-day-14/#day-14-of-100">Day 14 of 100</a></h3>
<h3 id="progress"><a class="toclink" href="../../go-r1-day-14/#progress">progress</a></h3>
<ul>
<li>built golang function with aws-sdk that returned ec2 instances, images</li>
<li>Joined the data together together to search for matching image from the ec2 metadata</li>
<li>generated json report from results and final struct</li>
</ul>
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2020-11-11 00:00:00">November 11, 2020</time></li>
        
        
          
          <li class="md-meta__item">
            
              1 min read
            
          </li>
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="go-r1-day-14"><a class="toclink" href="../../go-r1-day-14/">Go R1 Day 14</a></h2>
<h3 id="day-14-of-100"><a class="toclink" href="../../go-r1-day-14/#day-14-of-100">Day 14 of 100</a></h3>
<h3 id="progress"><a class="toclink" href="../../go-r1-day-14/#progress">progress</a></h3>
<ul>
<li>Migrated my new aws lambda logger from zap to zerolog. Zap gave me some problems initially so zerolog is my favorite structured logger right now, much simpler.</li>
<li>Constructed <code>go-task</code> runner file for launching go test and go build/run.</li>
<li>Structured logging required a little bit of refactor but worked.</li>
</ul>
<p>Here's an example of providing back a logged string (don't log secrets normally, but I'm in testing phase) with structure.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="w">    </span><span class="nx">log</span><span class="p">.</span><span class="nx">Debug</span><span class="p">().</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="w">        </span><span class="nx">Str</span><span class="p">(</span><span class="s">&quot;decodedBinarySecret&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">decodedBinarySecret</span><span class="p">).</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="w">        </span><span class="nx">Str</span><span class="p">(</span><span class="s">&quot;secretString&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">secretString</span><span class="p">).</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="w">        </span><span class="nx">Msg</span><span class="p">(</span><span class="s">&quot;Depending on whether the secret is a string or binary, one of these fields will be populated.&quot;</span><span class="p">)</span>
</code></pre></div>
<p>Based on my improved understanding of conversions vs type assertions, the need to convert using a "cast" (Go calls these conversions, and yes it makes a copy in memory for this):</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="nx">log</span><span class="p">.</span><span class="nx">Info</span><span class="p">().</span><span class="nx">Str</span><span class="p">(</span><span class="s">&quot;requestDump&quot;</span><span class="p">,</span><span class="w"> </span><span class="nb">string</span><span class="p">(</span><span class="nx">requestDump</span><span class="p">)).</span><span class="nx">Msg</span><span class="p">(</span><span class="s">&quot;request information&quot;</span><span class="p">)</span>
</code></pre></div>
<p>Type assertions are done when working with an interface.
I'm still working on my understanding of interfaces as they are their own beast in Go.
Unlike most other languages, a Go type implements an interface when all the required methods are matched.
This provides a great deal of the flexibility in Go interfaces.</p>
<p>The scoping of the interfaces is important, and while I listened to a lecture on this, I didn't yet work through the interface design principles to ensure the best resusability/narrowness of scope concepts.
I think that's going to take more "getting my hands dirty" for it to click.</p>
<h3 id="links"><a class="toclink" href="../../go-r1-day-14/#links">links</a></h3>
<ul>
<li><a href="https://github.com/rs/zerolog">zerolog</a></li>
</ul>
    
  </div>
</article>
      
      
        
          



<nav class="md-pagination">
  <a class="md-pagination__link" href="../..">1</a> <span class="md-pagination__dots">..</span> <a class="md-pagination__link" href="../12/">12</a> <a class="md-pagination__link" href="../13/">13</a> <span class="md-pagination__current">14</span> <a class="md-pagination__link" href="../15/">15</a> <a class="md-pagination__link" href="../16/">16</a> <span class="md-pagination__dots">..</span> <a class="md-pagination__link" href="../37/">37</a>
</nav>
        
      
    </div>
  </div>

          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.indexes", "navigation.instant", "navigation.tracking", "navigation.tabs", "navigation.tabs.sticky", "navigation.sections", "toc.follow", "navigation.top", "navigation.path", "search.suggest", "search.highlight", "content.code.copy"], "search": "../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.ad660dcc.min.js"></script>
      
        <script src="../../js/timeago.min.js"></script>
      
        <script src="../../js/timeago_mkdocs_material.js"></script>
      
        <script src="https://unpkg.com/mermaid@10.4.0/dist/mermaid.min.js"></script>
      
    
  <script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(() => { lightbox.reload() });
</script></body>
</html>