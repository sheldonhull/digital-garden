
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../../welcome/">
      
      
        <link rel="next" href="../../2023/">
      
      
        <link rel="alternate" type="application/rss+xml" title="RSS feed" href="../../feed_rss_created.xml">
        <link rel="alternate" type="application/rss+xml" title="RSS feed of updated content" href="../../feed_rss_updated.xml">
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.0, mkdocs-material-9.5.26">
    
    
      
        <title>posts - digital garden</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.6543a935.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CFira+Code:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Fira Code"}</style>
      
    
    
      <link rel="stylesheet" href="../../css/timeago.css">
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
      <link rel="stylesheet" href="../../stylesheets/gist.css">
    
      <link rel="stylesheet" href="../../stylesheets/code-highlighting.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
   <link href="../../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
    html.glightbox-open { overflow: initial; height: 100%; }
    .gslide-title { margin-top: 0px; user-select: text; }
    .gslide-desc { color: #666; user-select: text; }
    .gslide-image img { background: white; }
    .gscrollbar-fixer { padding-right: 15px; }
    .gdesc-inner { font-size: 0.75rem; }
    body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
    body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
    body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}</style> <script src="../../assets/javascripts/glightbox.min.js"></script></head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#posts" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="digital garden" class="md-header__button md-logo" aria-label="digital garden" data-md-component="logo">
      
  <img src="../../assets/images/sheldon-avatar.jpg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            digital garden
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              posts
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/sheldonhull/digital-garden" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../welcome/" class="md-tabs__link">
        
  
    
  
  home

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
    
  
  posts

      </a>
    </li>
  

      
        
  
  
  
    
    
      
  
  
  
    
    
      
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../development/tooling/task/" class="md-tabs__link">
          
  
    
  
  notes

        </a>
      </li>
    
  

    
  

    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../2023/" class="md-tabs__link">
          
  
    
  
  archive

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
                
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" hidden>
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="digital garden" class="md-nav__button md-logo" aria-label="digital garden" data-md-component="logo">
      
  <img src="../../assets/images/sheldon-avatar.jpg" alt="logo">

    </a>
    digital garden
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/sheldonhull/digital-garden" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../welcome/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    
      
    
  
  
    <li class="md-nav__item">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    posts
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="../.." class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    posts
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#go-r1-day-35" class="md-nav__link">
    <span class="md-ellipsis">
      Go R1 Day 35
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#go-r1-day-34" class="md-nav__link">
    <span class="md-ellipsis">
      Go R1 Day 34
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#go-r1-day-33" class="md-nav__link">
    <span class="md-ellipsis">
      Go R1 Day 33
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#go-r1-day-32" class="md-nav__link">
    <span class="md-ellipsis">
      Go R1 Day 32
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#go-r1-day-31" class="md-nav__link">
    <span class="md-ellipsis">
      Go R1 Day 31
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#go-r1-day-30" class="md-nav__link">
    <span class="md-ellipsis">
      Go R1 Day 30
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#go-r1-day-29" class="md-nav__link">
    <span class="md-ellipsis">
      Go R1 Day 29
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fix-terraform-provider-path-in-state" class="md-nav__link">
    <span class="md-ellipsis">
      Fix Terraform Provider Path in State
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#azure-pipelines-template-iteration" class="md-nav__link">
    <span class="md-ellipsis">
      Azure Pipelines Template Iteration
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#git-workflow-with-git-town" class="md-nav__link">
    <span class="md-ellipsis">
      Git Workflow With Git Town
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    notes
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            notes
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../development/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Development
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3_1" id="__nav_3_1_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_1">
            <span class="md-nav__icon md-icon"></span>
            Development
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
          
        
      
        
      
        
      
        
      
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1_1" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../development/tooling/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Tooling
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3_1_1" id="__nav_3_1_1_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_1_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_1_1">
            <span class="md-nav__icon md-icon"></span>
            Tooling
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../development/tooling/task/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    task
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../development/tooling/precommit/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    precommit
  </span>
  

      </a>
    </li>
  

              
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../development/tooling/git/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    git
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../development/tooling/docker/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    docker
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../development/tooling/direnv/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    direnv
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../development/tooling/aqua/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    aqua
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
          
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1_2" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../development/shell/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Shell
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3_1_2" id="__nav_3_1_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_1_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_1_2">
            <span class="md-nav__icon md-icon"></span>
            Shell
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../development/shell/shell/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    shell
  </span>
  

      </a>
    </li>
  

              
            
              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
          
        
      
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1_3" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../development/powershell/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Powershell
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3_1_3" id="__nav_3_1_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_1_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_1_3">
            <span class="md-nav__icon md-icon"></span>
            Powershell
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../development/powershell/powershell/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    powershell
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../development/powershell/pester/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Pester
  </span>
  

      </a>
    </li>
  

              
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../development/powershell/dbatools/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    dbatools
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../development/observability/observability/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    observability
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../development/level-up/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Level-Up
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../development/kubernetes/kubernetes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    kubernetes
  </span>
  

      </a>
    </li>
  

              
            
              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1_8" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../development/go/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Go
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3_1_8" id="__nav_3_1_8_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_1_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_1_8">
            <span class="md-nav__icon md-icon"></span>
            Go
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../development/go/vscode-configuration/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    VSCode Configuration for Go
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../development/go/using-go-tools/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Using Go Tools
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../development/go/testing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Go Testing
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../development/go/pre-commit/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Pre-Commit
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../development/go/modules/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Go Modules
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../development/go/mage/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Mage
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../development/go/logging/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Go Logging
  </span>
  

      </a>
    </li>
  

              
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../development/go/http/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    HTTP
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../development/go/goroutines/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    goroutines
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../development/go/go/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    go
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../development/go/effective-go/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Effective Go
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../development/go/dagger/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Dagger
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../development/go/code-coverage/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Code Coverage
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
          
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1_9" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../development/front-end/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Front end
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3_1_9" id="__nav_3_1_9_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_1_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_1_9">
            <span class="md-nav__icon md-icon"></span>
            Front end
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../development/front-end/yarn/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Yarn
  </span>
  

      </a>
    </li>
  

              
            
              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
          
        
      
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1_10" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../development/build-release-engineering/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Build release engineering
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3_1_10" id="__nav_3_1_10_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_1_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_1_10">
            <span class="md-nav__icon md-icon"></span>
            Build release engineering
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../development/build-release-engineering/renovate/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    renovate
  </span>
  

      </a>
    </li>
  

              
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../development/build-release-engineering/azure-pipelines/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Azure Pipelines
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
          
        
      
        
      
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1_11" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../development/aws/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Aws
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3_1_11" id="__nav_3_1_11_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_1_11_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_1_11">
            <span class="md-nav__icon md-icon"></span>
            Aws
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../development/aws/s5cmd/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Syncing Files Using S5Cmd
  </span>
  

      </a>
    </li>
  

              
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../development/aws/aws-powershell/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    AWS PowerShell
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../development/aws/aws-cli/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    aws-cli
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1_12" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../development/ai/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Ai
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3_1_12" id="__nav_3_1_12_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_1_12_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_1_12">
            <span class="md-nav__icon md-icon"></span>
            Ai
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../development/ai/copilot/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    copilot
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../development/ai/chat/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    chat
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2" >
        
          
          <label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Career
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2">
            <span class="md-nav__icon md-icon"></span>
            Career
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../career/management-dynamics/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Management Dynamics
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../career/eponymous-laws/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Eponymous Laws
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../career/engineering-culture/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Engineering Culture
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../career/communication/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Communication
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    archive
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            archive
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../2023/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2023
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../2022/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2022
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../2021/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2021
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../2020/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2020
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../2019/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2019
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../2018/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2018
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../2017/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2017
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../2016/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2016
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../2015/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2015
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../2014/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2014
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../2013/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2013
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
                
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#go-r1-day-35" class="md-nav__link">
    <span class="md-ellipsis">
      Go R1 Day 35
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#go-r1-day-34" class="md-nav__link">
    <span class="md-ellipsis">
      Go R1 Day 34
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#go-r1-day-33" class="md-nav__link">
    <span class="md-ellipsis">
      Go R1 Day 33
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#go-r1-day-32" class="md-nav__link">
    <span class="md-ellipsis">
      Go R1 Day 32
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#go-r1-day-31" class="md-nav__link">
    <span class="md-ellipsis">
      Go R1 Day 31
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#go-r1-day-30" class="md-nav__link">
    <span class="md-ellipsis">
      Go R1 Day 30
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#go-r1-day-29" class="md-nav__link">
    <span class="md-ellipsis">
      Go R1 Day 29
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fix-terraform-provider-path-in-state" class="md-nav__link">
    <span class="md-ellipsis">
      Fix Terraform Provider Path in State
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#azure-pipelines-template-iteration" class="md-nav__link">
    <span class="md-ellipsis">
      Azure Pipelines Template Iteration
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#git-workflow-with-git-town" class="md-nav__link">
    <span class="md-ellipsis">
      Git Workflow With Git Town
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
  <div class="md-content" data-md-component="content">
    <div class="md-content__inner">
      <header class="md-typeset">
        <h1 id="posts">posts<a class="headerlink" href="#posts" title="Permanent link">🔗</a></h1>
      </header>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2021-04-09 00:00:00">April 9, 2021</time></li>
        
        
          
          <li class="md-meta__item">
            
              1 min read
            
          </li>
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="go-r1-day-35"><a class="toclink" href="../../go-r1-day-35/">Go R1 Day 35</a></h2>
<h3 id="progress"><a class="toclink" href="../../go-r1-day-35/#progress">progress</a></h3>
<ul>
<li>Worked with Taskflow a bit more.</li>
<li>Need to identify better error handling pattern on when to resolve vs handle internal to a function, as it feels like I'm doing needless error checking.</li>
<li>Wrote func to run terraform init, plan, and apply.</li>
<li>This takes dynamical inputs for vars and backend file.</li>
<li>Also dynamically switches terraform versions by running tfswitch.</li>
</ul>
<p>Definitely more verbose code than powershell, but it's a good way to get used to Go while achieving some useful automation tasks I need to do.</p>
<p>Example of some code for checking terraform path.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="kd">func</span><span class="w"> </span><span class="nx">terraformPath</span><span class="p">(</span><span class="nx">tf</span><span class="w"> </span><span class="o">*</span><span class="nx">taskflow</span><span class="p">.</span><span class="nx">TF</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="nx">terraformPath</span><span class="w"> </span><span class="kt">string</span><span class="p">,</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="kt">error</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="w">    </span><span class="nx">terraformPath</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">path</span><span class="p">.</span><span class="nx">Join</span><span class="p">(</span><span class="nx">toolsDir</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;terraform&quot;</span><span class="p">)</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nx">_</span><span class="p">,</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">os</span><span class="p">.</span><span class="nx">Stat</span><span class="p">(</span><span class="nx">terraformPath</span><span class="p">);</span><span class="w"> </span><span class="nx">os</span><span class="p">.</span><span class="nx">IsNotExist</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="w">        </span><span class="nx">tf</span><span class="p">.</span><span class="nx">Errorf</span><span class="p">(</span><span class="s">&quot;❗ cannot find terraform at: [%s] -&gt; [%v]&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">terraformPath</span><span class="p">,</span><span class="w"> </span><span class="nx">err</span><span class="p">)</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">err</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="w">    </span><span class="nx">tf</span><span class="p">.</span><span class="nx">Logf</span><span class="p">(</span><span class="s">&quot;✅ found terraform at: [%s]&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">terraformPath</span><span class="p">)</span>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">terraformPath</span><span class="p">,</span><span class="w"> </span><span class="kc">nil</span>
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a><span class="p">}</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="nx">terraformPath</span><span class="p">,</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">terraformPath</span><span class="p">(</span><span class="nx">tf</span><span class="p">)</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="k">if</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">nil</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="w">  </span><span class="nx">tf</span><span class="p">.</span><span class="nx">Errorf</span><span class="p">(</span><span class="s">&quot;❗ unable to proceed due to not finding terraform installed [%v]&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">err</span><span class="p">)</span>
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a><span class="w">  </span><span class="k">return</span>
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a><span class="p">}</span>
</code></pre></div>
<p>However, once I call this, I'm see more effort in handling, which feels like I'm double double work at times.</p>
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2021-04-08 00:00:00">April 8, 2021</time></li>
        
        
          
          <li class="md-meta__item">
            
              1 min read
            
          </li>
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="go-r1-day-34"><a class="toclink" href="../../go-r1-day-34/">Go R1 Day 34</a></h2>
<h3 id="progress"><a class="toclink" href="../../go-r1-day-34/#progress">progress</a></h3>
<ul>
<li>figured out how to import <code>util/logger.go</code> as a package</li>
<li>after much confusion due to <code>logger</code>, <code>log</code>, <code>*zerolog.Logger</code> and more variables all deviously similar in name... how to pass around the initialized package logger that I configure.</li>
<li>learned that global scope and package scoped loggers being initialized at run is concerned an anti-pattern</li>
<li>properly wrapping to avoid the log initialization on import with <code>type Logger struct { logger: *zerolog.Logger; }</code> as an example avoids the same behavior as: <code>var Log *zerolog.Logger</code></li>
<li>will evaluate better scoping in the future, but for now figured it would be a 🚀 #shipit moment to improve as I can later. <sup id="fnref:package-level-logger"><a class="footnote-ref" href="../../go-r1-day-34/#fn:package-level-logger">1</a></sup></li>
</ul>
<div class="footnote">
<hr />
<ol>
<li id="fn:package-level-logger">
<p><a href="https://dave.cheney.net/2017/01/23/the-package-level-logger-anti-pattern">The package level logger anti pattern – The acme of foolishness</a>&#160;<a class="footnote-backref" href="../../go-r1-day-34/#fnref:package-level-logger" title="Jump back to footnote 1 in the text">&#8617;</a></p>
</li>
</ol>
</div>
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2021-04-06 00:00:00">April 6, 2021</time></li>
        
        
          
          <li class="md-meta__item">
            
              1 min read
            
          </li>
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="go-r1-day-33"><a class="toclink" href="../../go-r1-day-33/">Go R1 Day 33</a></h2>
<h3 id="progress"><a class="toclink" href="../../go-r1-day-33/#progress">progress</a></h3>
<ul>
<li>successfully created logging package using zerolog</li>
<li>learned about scoping with packages</li>
<li>linked to a private internal repository and how to leverage the module replace operator to temporarily alter path import from url to local override.</li>
<li>middleware is a newer concept, so I need to learn more on this later so I can understand how to use to inject special log handling for http requests and other actions.</li>
</ul>
<p>Thoughts for today are that the pressure of jumping into an existing codebase is resulting in me moving faster than I probably should.
I'm going to take some time to keep doing the web fundamentals, lambda, and exercisms to ensure I'm setting a better foundation long-term, and not just winging it. 😄</p>
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2021-04-05 00:00:00">April 5, 2021</time></li>
        
        
          
          <li class="md-meta__item">
            
              1 min read
            
          </li>
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="go-r1-day-32"><a class="toclink" href="../../go-r1-day-32/">Go R1 Day 32</a></h2>
<h3 id="progress"><a class="toclink" href="../../go-r1-day-32/#progress">progress</a></h3>
<ul>
<li>created some structured logging improvements with zerolog</li>
<li>began exploration of middleware concepts for logging</li>
<li>generated test stubs using gotests</li>
</ul>
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2021-04-02 00:00:00">April 2, 2021</time></li>
        
        
          
          <li class="md-meta__item">
            
              1 min read
            
          </li>
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="go-r1-day-31"><a class="toclink" href="../../go-r1-day-31/">Go R1 Day 31</a></h2>
<h3 id="progress"><a class="toclink" href="../../go-r1-day-31/#progress">progress</a></h3>
<ul>
<li>Learned a bit about idiomatic patterns wtih error handling.</li>
<li>Learned about inline block intiailization of variables using <code>if err := method(); err != nil {...}</code> approach.</li>
<li>Considered a bit more idiomatic patterns when I noticed excessibe nested if blocks.</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="nx">tfdir</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">tf</span><span class="p">.</span><span class="nx">Params</span><span class="p">().</span><span class="nx">String</span><span class="p">(</span><span class="s">&quot;tfdir&quot;</span><span class="p">)</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="k">if</span><span class="w"> </span><span class="nx">tfdir</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="w">  </span><span class="nx">tf</span><span class="p">.</span><span class="nx">Logf</span><span class="p">(</span><span class="s">&quot;tfdir set to: [%s]&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">tfdir</span><span class="p">)</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="w">  </span><span class="nx">tf</span><span class="p">.</span><span class="nx">Errorf</span><span class="p">(</span><span class="s">&quot;🧪 failed to get tfdir parameter: [%v]&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">tfdir</span><span class="p">)</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="p">}</span>
</code></pre></div>
<p>This would probably be more in alignment with Go standards by writing as:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="nx">tfdir</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">tf</span><span class="p">.</span><span class="nx">Params</span><span class="p">().</span><span class="nx">String</span><span class="p">(</span><span class="s">&quot;tfdir&quot;</span><span class="p">)</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="k">if</span><span class="w"> </span><span class="nx">tfdir</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="w">  </span><span class="nx">tf</span><span class="p">.</span><span class="nx">Errorf</span><span class="p">(</span><span class="s">&quot;🧪 failed to get tfdir parameter: [%v]&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">tfdir</span><span class="p">)</span>
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a><span class="w">  </span><span class="k">return</span>
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a><span class="p">}</span>
<a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a><span class="nx">tf</span><span class="p">.</span><span class="nx">Logf</span><span class="p">(</span><span class="s">&quot;tfdir set to: [%s]&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">tfdir</span><span class="p">)</span>
</code></pre></div>
<p>This reduces the noise and keeps things pretty flat.</p>
<h3 id="links"><a class="toclink" href="../../go-r1-day-31/#links">links</a></h3>
<p><a href="https://www.calhoun.io/one-liner-if-statements-with-errors/">When Should I Use One Liner if...else Statements in Go?</a>)</p>
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2021-04-01 00:00:00">April 1, 2021</time></li>
        
        
          
          <li class="md-meta__item">
            
              1 min read
            
          </li>
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="go-r1-day-30"><a class="toclink" href="../../go-r1-day-30/">Go R1 Day 30</a></h2>
<h3 id="progress"><a class="toclink" href="../../go-r1-day-30/#progress">progress</a></h3>
<ul>
<li>Built some go functions for build tasks work with terraform and setup of projects using taskflow.</li>
</ul>
<p>Learned one one to pass in arguments using slices.
I'm pretty sure you can use some stringbuilder type functionality to get similar behavior, but this worked fine for my use case.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="nx">cmdParams</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="p">[]</span><span class="kt">string</span><span class="p">{}</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="nx">cmdParams</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nb">append</span><span class="p">(</span><span class="nx">cmdParams</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;-chdir=&quot;</span><span class="o">+</span><span class="nx">tfdir</span><span class="p">)</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="nx">cmdParams</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nb">append</span><span class="p">(</span><span class="nx">cmdParams</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;init&quot;</span><span class="p">)</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="nx">cmdParams</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nb">append</span><span class="p">(</span><span class="nx">cmdParams</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;-input=false&quot;</span><span class="p">)</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="nx">cmdParams</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nb">append</span><span class="p">(</span><span class="nx">cmdParams</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;-backend=true&quot;</span><span class="p">)</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="nx">cmdParams</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nb">append</span><span class="p">(</span><span class="nx">cmdParams</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;-backend-config=&quot;</span><span class="o">+</span><span class="nx">tfconfig</span><span class="p">)</span>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="nx">terraformCmd</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">tf</span><span class="p">.</span><span class="nx">Cmd</span><span class="p">(</span><span class="nx">terraformPath</span><span class="p">,</span><span class="w"> </span><span class="nx">cmdParams</span><span class="o">...</span><span class="p">)</span>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a><span class="k">if</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">terraformCmd</span><span class="p">.</span><span class="nx">Run</span><span class="p">();</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">nil</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a><span class="w">  </span><span class="nx">tf</span><span class="p">.</span><span class="nx">Errorf</span><span class="p">(</span><span class="s">&quot;⭕ terraform init failed: [%v]&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">err</span><span class="p">)</span>
<a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a><span class="w">  </span><span class="k">return</span>
<a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a><span class="p">}</span>
</code></pre></div>
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2021-03-31 00:00:00">March 31, 2021</time></li>
        
        
          
          <li class="md-meta__item">
            
              2 min read
            
          </li>
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="go-r1-day-29"><a class="toclink" href="../../go-r1-day-29/">Go R1 Day 29</a></h2>
<h3 id="progress"><a class="toclink" href="../../go-r1-day-29/#progress">progress</a></h3>
<ul>
<li>Evaluated Mage as a replacement for bash/pwsh based tasks for automation with Azure Pipelines.</li>
<li>Was able to get terraform to run with dynamic configuration using the following approach:</li>
</ul>
<p>Install with</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>go<span class="w"> </span>get<span class="w"> </span>-u<span class="w"> </span>github.com/magefile/mage/mg
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>go<span class="w"> </span>mod<span class="w"> </span>init<span class="w"> </span>mage-build
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>go<span class="w"> </span>get<span class="w"> </span>github.com/magefile/mage/mg
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>go<span class="w"> </span>get<span class="w"> </span>github.com/magefile/mage/sh
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>go<span class="w"> </span>mod<span class="w"> </span>tidy
</code></pre></div>
<p>Then to get <code>mage-select</code> run:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="nv">GO111MODULE</span><span class="o">=</span>off<span class="w"> </span>go<span class="w"> </span>get<span class="w"> </span>github.com/iwittkau/mage-select
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="nb">cd</span><span class="w"> </span><span class="nv">$GOPATH</span>/src/github.com/iwittkau/mage-select
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a>mage<span class="w"> </span>install
</code></pre></div>
<p>Configure some constants, which I'd probably do differently later.
For now, this is a good rough start.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="kd">const</span><span class="w"> </span><span class="p">(</span>
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="w">    </span><span class="nx">repo</span><span class="w">          </span><span class="p">=</span><span class="w"> </span><span class="s">&quot;myrepopath&quot;</span>
<a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span class="w">    </span><span class="nx">name</span><span class="w">          </span><span class="p">=</span><span class="w"> </span><span class="s">&quot;myreponame&quot;</span>
<a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a><span class="w">    </span><span class="nx">buildImage</span><span class="w">    </span><span class="p">=</span><span class="w"> </span><span class="s">&quot;mcr.microsoft.com/vscode/devcontainers/base:0-focal&quot;</span>
<a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a><span class="w">    </span><span class="nx">terraformDir</span><span class="w">  </span><span class="p">=</span><span class="w"> </span><span class="s">&quot;terraform/stack&quot;</span>
<a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a><span class="w">    </span><span class="nx">config_import</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">&quot;qa.config&quot;</span>
<a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a><span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="kd">func</span><span class="w"> </span><span class="nx">TerraformInit</span><span class="p">()</span><span class="w"> </span><span class="kt">error</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a><span class="w">    </span><span class="nx">params</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">&quot;-chdir=&quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">terraformDir</span><span class="p">}</span>
<a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a><span class="w">    </span><span class="nx">params</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nb">append</span><span class="p">(</span><span class="nx">params</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;init&quot;</span><span class="p">)</span>
<a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a><span class="w">    </span><span class="nx">params</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nb">append</span><span class="p">(</span><span class="nx">params</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;-input=false&quot;</span><span class="p">)</span>
<a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a><span class="w">    </span><span class="nx">params</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nb">append</span><span class="p">(</span><span class="nx">params</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;-var&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;config_import=&quot;</span><span class="o">+</span><span class="nx">config_import</span><span class="o">+</span><span class="s">&quot;.yml&quot;</span><span class="p">)</span>
<a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a>
<a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a><span class="w">    </span><span class="c1">// Backend location configuration only changes during the init phase, so you do not need to provide this to each command thereafter</span>
<a id="__codelineno-3-8" name="__codelineno-3-8" href="#__codelineno-3-8"></a><span class="w">    </span><span class="c1">// https://github.com/hashicorp/terraform/pull/20428#issuecomment-470674564</span>
<a id="__codelineno-3-9" name="__codelineno-3-9" href="#__codelineno-3-9"></a><span class="w">    </span><span class="nx">params</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nb">append</span><span class="p">(</span><span class="nx">params</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;-backend-config=./&quot;</span><span class="o">+</span><span class="nx">config_import</span><span class="o">+</span><span class="s">&quot;.tfvars&quot;</span><span class="p">)</span>
<a id="__codelineno-3-10" name="__codelineno-3-10" href="#__codelineno-3-10"></a><span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="s">&quot;starting terraform init&quot;</span><span class="p">)</span>
<a id="__codelineno-3-11" name="__codelineno-3-11" href="#__codelineno-3-11"></a><span class="w">    </span><span class="nx">err</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">sh</span><span class="p">.</span><span class="nx">RunV</span><span class="p">(</span><span class="s">&quot;terraform&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">params</span><span class="o">...</span><span class="p">)</span>
<a id="__codelineno-3-12" name="__codelineno-3-12" href="#__codelineno-3-12"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">nil</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-3-13" name="__codelineno-3-13" href="#__codelineno-3-13"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nx">err</span>
<a id="__codelineno-3-14" name="__codelineno-3-14" href="#__codelineno-3-14"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-3-15" name="__codelineno-3-15" href="#__codelineno-3-15"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="kc">nil</span>
<a id="__codelineno-3-16" name="__codelineno-3-16" href="#__codelineno-3-16"></a><span class="p">}</span>
</code></pre></div>
<p>Once terraform was initialized, it could be planned.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="kd">func</span><span class="w"> </span><span class="nx">TerraformPlan</span><span class="p">()</span><span class="w"> </span><span class="kt">error</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a><span class="w">    </span><span class="nx">mg</span><span class="p">.</span><span class="nx">Deps</span><span class="p">(</span><span class="nx">TerraformInit</span><span class="p">)</span>
<a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a><span class="w">    </span><span class="nx">params</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="p">[]</span><span class="kt">string</span><span class="p">{</span><span class="s">&quot;-chdir=&quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">terraformDir</span><span class="p">}</span>
<a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a><span class="w">    </span><span class="nx">params</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nb">append</span><span class="p">(</span><span class="nx">params</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;plan&quot;</span><span class="p">)</span>
<a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a><span class="w">    </span><span class="nx">params</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nb">append</span><span class="p">(</span><span class="nx">params</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;-input=false&quot;</span><span class="p">)</span>
<a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a><span class="w">    </span><span class="nx">params</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nb">append</span><span class="p">(</span><span class="nx">params</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;-var&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;config_import=&quot;</span><span class="o">+</span><span class="nx">config_import</span><span class="o">+</span><span class="s">&quot;.yml&quot;</span><span class="p">)</span>
<a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a><span class="w">    </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Println</span><span class="p">(</span><span class="s">&quot;starting terraform plan&quot;</span><span class="p">)</span>
<a id="__codelineno-4-8" name="__codelineno-4-8" href="#__codelineno-4-8"></a><span class="w">    </span><span class="nx">err</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">sh</span><span class="p">.</span><span class="nx">RunV</span><span class="p">(</span><span class="s">&quot;terraform&quot;</span><span class="p">,</span><span class="w"> </span><span class="nx">params</span><span class="o">...</span><span class="p">)</span>
<a id="__codelineno-4-9" name="__codelineno-4-9" href="#__codelineno-4-9"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">nil</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-4-10" name="__codelineno-4-10" href="#__codelineno-4-10"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nx">err</span>
<a id="__codelineno-4-11" name="__codelineno-4-11" href="#__codelineno-4-11"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-4-12" name="__codelineno-4-12" href="#__codelineno-4-12"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="kc">nil</span>
<a id="__codelineno-4-13" name="__codelineno-4-13" href="#__codelineno-4-13"></a><span class="p">}</span>
</code></pre></div>
<ul>
<li>Of interest as well was mage-select, providing a new gui option for easier running by others joining a project.</li>
</ul>
<p><img alt="mages-select-on-console" src="../../2021/images/r1-d029-mages.png" /></p>
<h3 id="links"><a class="toclink" href="../../go-r1-day-29/#links">links</a></h3>
<ul>
<li><a href="https://bit.ly/2PIuI4e">mage</a></li>
<li><a href="https://bit.ly/3cza7bw">mage-select</a></li>
</ul>
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2021-03-10 00:00:00">March 10, 2021</time></li>
        
        
          
          <li class="md-meta__item">
            
              2 min read
            
          </li>
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="fix-terraform-provider-path-in-state"><a class="toclink" href="../../fix-terraform-provider-path-in-state/">Fix Terraform Provider Path in State</a></h2>
<p>Fixing Terraform provider paths in state might be required after upgrading to 0.13-0.14 if your prior state has the following paths.</p>
<p>First, get the terraform providers from state using: <code>terraform providers</code></p>
<p>The output should look similar to this:</p>
<p><img alt="image-of-providers" src="../../2021/images/2021-03-10-microblog-provider-list-01.png" /></p>
<p>To fix these, try running the commands to fix state.
Please adjust to the required providers your state uses, and make sure your tooling has a backup of the state file in case something goes wrong.
Terraform Cloud should have this backed up automatically if it's your backend.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>terraform<span class="w"> </span>state<span class="w"> </span>replace-provider<span class="w"> </span>--<span class="w"> </span>registry.terraform.io/-/aws<span class="w"> </span>registry.terraform.io/hashicorp/aws
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>terraform<span class="w"> </span>state<span class="w"> </span>replace-provider<span class="w"> </span>--<span class="w"> </span>registry.terraform.io/-/random<span class="w"> </span>registry.terraform.io/hashicorp/random
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>terraform<span class="w"> </span>state<span class="w"> </span>replace-provider<span class="w"> </span>--<span class="w"> </span>registry.terraform.io/-/null<span class="w"> </span>registry.terraform.io/hashicorp/null
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>terraform<span class="w"> </span>state<span class="w"> </span>replace-provider<span class="w"> </span>--<span class="w"> </span>registry.terraform.io/-/azuredevops<span class="w"> </span>registry.terraform.io/microsoft/azuredevops
</code></pre></div>
<p>The resulting changes can be seen when running <code>terraform providers</code> and seeing the dash is now gone.</p>
<p><img alt="image-of-providers-changed" src="../../2021/images/2021-03-10-microblog-provider-list-02.png" /></p>
<p><a href="http://bit.ly/3rvFPvr">Upgrading to Terraform v0.13 - Terraform by HashiCorp</a></p>
<p>{{&lt; admonition type="Example" title="Loop" open="false"&gt;}}</p>
<p>If you have multiple workspaces in the same folder, you'll have to run fix on their seperate state files.</p>
<p>This is an example of a quick adhoc loop with PowerShell to make this a bit quicker, using <code>tfswitch</code> cli tool.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="n">tf</span> <span class="n">workspace</span> <span class="n">list</span> <span class="p">|</span> <span class="k">ForEach</span><span class="n">-Object</span> <span class="p">{</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>    <span class="nv">$workspace</span> <span class="p">=</span> <span class="nv">$_</span><span class="p">.</span><span class="n">Replace</span><span class="p">(</span><span class="s1">&#39;*&#39;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">).</span><span class="n">Trim</span><span class="p">()</span>
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a>    <span class="nb">Write-Build</span> <span class="n">Green</span> <span class="s2">&quot;Selecting workspace: $workspace&quot;</span>
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a>    <span class="n">tf</span> <span class="n">workspace</span> <span class="nb">select </span><span class="nv">$workspace</span>
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a>    <span class="n">tfswitch</span> <span class="n">0</span><span class="p">.</span><span class="n">13</span><span class="p">.</span><span class="n">5</span>
<a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a>    <span class="n">tf</span> <span class="n">013</span><span class="p">.</span><span class="n">upgrade</span>
<a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a>    <span class="n">tfswitch</span>
<a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a>    <span class="n">tf</span> <span class="n">init</span>
<a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a>    <span class="c"># Only use autoapprove once you are confident of these changes</span>
<a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a>    <span class="n">terraform</span> <span class="n">state</span> <span class="n">replace-provider</span> <span class="n">-auto-approve</span> <span class="p">--</span> <span class="n">registry</span><span class="p">.</span><span class="n">terraform</span><span class="p">.</span><span class="n">io</span><span class="p">/-/</span><span class="n">aws</span> <span class="n">registry</span><span class="p">.</span><span class="n">terraform</span><span class="p">.</span><span class="n">io</span><span class="p">/</span><span class="n">hashicorp</span><span class="p">/</span><span class="n">aws</span>
<a id="__codelineno-1-11" name="__codelineno-1-11" href="#__codelineno-1-11"></a>    <span class="n">terraform</span> <span class="n">state</span> <span class="n">replace-provider</span> <span class="n">-auto-approve</span> <span class="p">--</span> <span class="n">registry</span><span class="p">.</span><span class="n">terraform</span><span class="p">.</span><span class="n">io</span><span class="p">/-/</span><span class="n">random</span> <span class="n">registry</span><span class="p">.</span><span class="n">terraform</span><span class="p">.</span><span class="n">io</span><span class="p">/</span><span class="n">hashicorp</span><span class="p">/</span><span class="n">random</span>
<a id="__codelineno-1-12" name="__codelineno-1-12" href="#__codelineno-1-12"></a>    <span class="n">terraform</span> <span class="n">state</span> <span class="n">replace-provider</span> <span class="n">-auto-approve</span> <span class="p">--</span> <span class="n">registry</span><span class="p">.</span><span class="n">terraform</span><span class="p">.</span><span class="n">io</span><span class="p">/-/</span><span class="n">null</span> <span class="n">registry</span><span class="p">.</span><span class="n">terraform</span><span class="p">.</span><span class="n">io</span><span class="p">/</span><span class="n">hashicorp</span><span class="p">/</span><span class="n">null</span>
<a id="__codelineno-1-13" name="__codelineno-1-13" href="#__codelineno-1-13"></a>    <span class="n">terraform</span> <span class="n">state</span> <span class="n">replace-provider</span> <span class="n">-auto-approve</span> <span class="p">--</span> <span class="n">registry</span><span class="p">.</span><span class="n">terraform</span><span class="p">.</span><span class="n">io</span><span class="p">/-/</span><span class="n">azuredevops</span> <span class="n">registry</span><span class="p">.</span><span class="n">terraform</span><span class="p">.</span><span class="n">io</span><span class="p">/</span><span class="n">microsoft</span><span class="p">/</span><span class="n">azuredevops</span>
<a id="__codelineno-1-14" name="__codelineno-1-14" href="#__codelineno-1-14"></a>    <span class="n">tf</span> <span class="n">validate</span>
<a id="__codelineno-1-15" name="__codelineno-1-15" href="#__codelineno-1-15"></a><span class="p">}</span>
</code></pre></div>
<p>{{&lt; /admonition &gt;}}</p>
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2021-03-05 00:00:00">March 5, 2021</time></li>
        
        
          
          <li class="md-meta__item">
            
              5 min read
            
          </li>
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="azure-pipelines-template-iteration"><a class="toclink" href="../../azure-pipelines-template-iteration/">Azure Pipelines Template Iteration</a></h2>
<h3 id="templates"><a class="toclink" href="../../azure-pipelines-template-iteration/#templates">Templates</a></h3>
<p>This isn't meant to be an exhaustive template overview.
I'm just going to give an example of what I found useful as I've been meaning to leverage templates for a while and finally got around to having a great use for it.</p>
<h3 id="my-use-case"><a class="toclink" href="../../azure-pipelines-template-iteration/#my-use-case">My Use Case</a></h3>
<p>I am a heavy user of <a href="https://bit.ly/3be6EP8">InvokeBuild</a>.
It's a very robust task runner tool that I've used to coordinate many project oriented actions, similar to Make, but also DevOps oriented work like AWS SSM tasks and more.</p>
<p>In this scenario, I needed to run a query across: multiple queries -&gt; across multiple servers -&gt; across hundreds of databases --&gt; and finally produce a single jsonl artifact<sup id="fnref:json-lines"><a class="footnote-ref" href="../../azure-pipelines-template-iteration/#fn:json-lines">3</a></sup></p>
<p>Originally, I did this in a single Invoke-Build task, but what I discovered was with a long running job I wanted to have a bit more granular view of the progress and percentage complete.
This also helped me visualize a bit more what specific queries cost the most in time.</p>
<h3 id="azure-pipeline-construction"><a class="toclink" href="../../azure-pipelines-template-iteration/#azure-pipeline-construction">Azure Pipeline Construction</a></h3>
<p>I've extracted out the key essential pieces here to explain the core concepts.</p>
<h4 id="build-number"><a class="toclink" href="../../azure-pipelines-template-iteration/#build-number">Build Number</a></h4>
<p>Build name is dynamically generated.
This is my standard format for most pipelines, but you can adjust the naming with parameters (which are a compile time, before runtime) as well to add other descriptive values.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$(BuildDefinitionName).$(Configuration).$(Build.QueuedBy).$(DayOfYear)$(Rev:.r)</span>
</code></pre></div>
<p>{{&lt; admonition type="Info" title="Parameters" open="false"&gt;}}</p>
<p>Parameters are evaluated at compile time, rather than during the build run phase.</p>
<p>This means you can use something like the example below to update the queued build name on run.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$(BuildDefinitionName).$(Configuration).$(Build.QueuedBy).${{ parameters.SELECTED_VALUE }}.$(DayOfYear)$(Rev:.r)</span>
</code></pre></div>
<p>Using a build variable might require updating the build name if the build variable isn't set on queue, as it won't pick it up without this command.</p>
<p>{{&lt; /admonition &gt;}}</p>
<h4 id="trigger"><a class="toclink" href="../../azure-pipelines-template-iteration/#trigger">Trigger</a></h4>
<p>Setting the following values ensures this is a manual pipeline.
Otherwise, once the pipeline is linked it would automatically trigger on PR and main branch commits.</p>
<p>There's other customization in terms of filtering triggers based on the path of the changed file, branch names, batching changes with multiple commits, and more in the docs.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>trigger: none
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a>pr: none
</code></pre></div>
<h4 id="parameters"><a class="toclink" href="../../azure-pipelines-template-iteration/#parameters">Parameters</a></h4>
<p>Designed for user input, the parameters provide a good experience in customizing runs easily at queue time.</p>
<p>This can be a full yaml defined object, but my examples here are the simple ones.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="nt">parameters</span><span class="p">:</span>
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Configuration</span>
<a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a><span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
<a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a><span class="w">    </span><span class="nt">default</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">qa</span>
<a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a><span class="w">    </span><span class="nt">values</span><span class="p">:</span>
<a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">qa</span>
<a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">prod</span>
<a id="__codelineno-3-8" name="__codelineno-3-8" href="#__codelineno-3-8"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">QUERY_NAME</span>
<a id="__codelineno-3-9" name="__codelineno-3-9" href="#__codelineno-3-9"></a><span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
<a id="__codelineno-3-10" name="__codelineno-3-10" href="#__codelineno-3-10"></a><span class="w">    </span><span class="nt">default</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;no-override&#39;</span>
<a id="__codelineno-3-11" name="__codelineno-3-11" href="#__codelineno-3-11"></a><span class="w">    </span><span class="nt">displayName</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">If no-override, then run everything, else specify a specific query to run.</span>
<a id="__codelineno-3-12" name="__codelineno-3-12" href="#__codelineno-3-12"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">SERVER_LIST</span>
<a id="__codelineno-3-13" name="__codelineno-3-13" href="#__codelineno-3-13"></a><span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
<a id="__codelineno-3-14" name="__codelineno-3-14" href="#__codelineno-3-14"></a><span class="w">    </span><span class="nt">default</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;tcp:123.123.123.1;tcp:123.123.123.2&#39;</span><span class="w"> </span><span class="c1">#split this in the task code</span>
<a id="__codelineno-3-15" name="__codelineno-3-15" href="#__codelineno-3-15"></a><span class="w">    </span><span class="nt">displayName</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Example Input that InvokeBuild would split to array</span>
</code></pre></div>
<h4 id="variables"><a class="toclink" href="../../azure-pipelines-template-iteration/#variables">Variables</a></h4>
<p>Parameters won't be set in the environment variables, so if you want these exposed to the next tasks, you have to set the variable from the parameter.</p>
<p>This command will now mean the tasks run will have a <code>$ENV:CONFIGURATION</code> set automatically.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="nt">variables</span><span class="p">:</span>
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">CONFIGURATION</span>
<a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a><span class="w">    </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">${{ parameters.Configuration }}</span>
</code></pre></div>
<h4 id="job"><a class="toclink" href="../../azure-pipelines-template-iteration/#job">Job</a></h4>
<p>The pipelines allow you to only put the level of complexity you need in your runbook.</p>
<p>This means if you just have tasks, you can put those, but if you have a deployment job then you can include tasks in the appropriate child section.</p>
<p>For my default template here I like control of multi-stage yaml builds, so I use the following format.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="nt">jobs</span><span class="p">:</span>
<a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">deployment</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-query-runbook</span>
<a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a><span class="w">    </span><span class="nt">displayName</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Run Query in ${{ parameters.Configuration }}</span>
<a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a><span class="w">    </span><span class="nt">timeoutInMinutes</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">480</span>
<a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a><span class="w">    </span><span class="nt">continueOnError</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a><span class="w">    </span><span class="nt">environment</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;my-environment-${{</span><span class="nv"> </span><span class="s">parameters.Configuration</span><span class="nv"> </span><span class="s">}}&#39;</span><span class="w">  </span><span class="c1">#could setup approval requirements for environments by specifying a name like `my-environment-prod` requires manual approval or is limited to specific folks</span>
<a id="__codelineno-5-7" name="__codelineno-5-7" href="#__codelineno-5-7"></a><span class="w">    </span><span class="nt">pool</span><span class="p">:</span>
<a id="__codelineno-5-8" name="__codelineno-5-8" href="#__codelineno-5-8"></a><span class="w">      </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-own-internal-agent</span><span class="w">  </span><span class="c1"># OR use hosted container config if you want</span>
<a id="__codelineno-5-9" name="__codelineno-5-9" href="#__codelineno-5-9"></a><span class="w">      </span><span class="nt">demands</span><span class="p">:</span>
<a id="__codelineno-5-10" name="__codelineno-5-10" href="#__codelineno-5-10"></a><span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">agent.os -equals Windows_NT</span><span class="w">  </span><span class="c1"># OR use Ubuntu if you have linux container. This is customizable to help you filter to desired agent if working with private subnets etc.</span>
<a id="__codelineno-5-11" name="__codelineno-5-11" href="#__codelineno-5-11"></a><span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">env -equals ${{ parameters.Configuration }}</span>
<a id="__codelineno-5-12" name="__codelineno-5-12" href="#__codelineno-5-12"></a><span class="w">    </span><span class="nt">strategy</span><span class="p">:</span>
<a id="__codelineno-5-13" name="__codelineno-5-13" href="#__codelineno-5-13"></a><span class="w">      </span><span class="nt">runOnce</span><span class="p">:</span>
<a id="__codelineno-5-14" name="__codelineno-5-14" href="#__codelineno-5-14"></a><span class="w">        </span><span class="nt">deploy</span><span class="p">:</span>
<a id="__codelineno-5-15" name="__codelineno-5-15" href="#__codelineno-5-15"></a><span class="w">          </span><span class="nt">steps</span><span class="p">:</span>
<a id="__codelineno-5-16" name="__codelineno-5-16" href="#__codelineno-5-16"></a><span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">checkout</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">self</span>
<a id="__codelineno-5-17" name="__codelineno-5-17" href="#__codelineno-5-17"></a><span class="w">              </span><span class="nt">persistCredentials</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<a id="__codelineno-5-18" name="__codelineno-5-18" href="#__codelineno-5-18"></a><span class="w">              </span><span class="nt">fetchDepth</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span><span class="w">  </span><span class="c1"># Unlimited in case you need more history</span>
<a id="__codelineno-5-19" name="__codelineno-5-19" href="#__codelineno-5-19"></a><span class="w">              </span><span class="nt">clean</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<a id="__codelineno-5-20" name="__codelineno-5-20" href="#__codelineno-5-20"></a><span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">task</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">printAllVariables@1</span>
</code></pre></div>
<h4 id="using-the-template"><a class="toclink" href="../../azure-pipelines-template-iteration/#using-the-template">Using the Template</a></h4>
<p>At the same level as the task, the template can be called.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">template</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">templates/run-query.yml</span>
<a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a><span class="w">              </span><span class="nt">parameters</span><span class="p">:</span>
<a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a><span class="w">                </span><span class="nt">SERVER_LIST</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">${{ parameters.QUERY_NAME}}</span>
<a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a><span class="w">                </span><span class="l l-Scalar l-Scalar-Plain">${{ if ne(parameters.QUERY_NAME,&#39;no-override&#39;) }}</span><span class="p p-Indicator">:</span>
<a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a><span class="w">                  </span><span class="nt">querynames</span><span class="p">:</span>
<a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a><span class="w">                    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&#39;${{</span><span class="nv"> </span><span class="s">parameters.QUERY_NAME</span><span class="nv"> </span><span class="s">}}&#39;</span>
<a id="__codelineno-6-7" name="__codelineno-6-7" href="#__codelineno-6-7"></a><span class="w">                </span><span class="l l-Scalar l-Scalar-Plain">${{ if eq(parameters.QUERY_NAME,&#39;no-override&#39;) }}</span><span class="p p-Indicator">:</span>
<a id="__codelineno-6-8" name="__codelineno-6-8" href="#__codelineno-6-8"></a><span class="w">                  </span><span class="nt">querynames</span><span class="p">:</span>
<a id="__codelineno-6-9" name="__codelineno-6-9" href="#__codelineno-6-9"></a><span class="w">                    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&#39;Query1&#39;</span>
<a id="__codelineno-6-10" name="__codelineno-6-10" href="#__codelineno-6-10"></a><span class="w">                    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&#39;Query2&#39;</span>
<a id="__codelineno-6-11" name="__codelineno-6-11" href="#__codelineno-6-11"></a><span class="w">                    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&#39;Query3&#39;</span>
</code></pre></div>
<p>A few concepts to unpack:</p>
<ul>
<li>Parameters must be passed into the template, as any build variables automatically in scope.</li>
<li>Variable reuse <sup id="fnref:variable-reuse"><a class="footnote-ref" href="../../azure-pipelines-template-iteration/#fn:variable-reuse">6</a></sup> has it's own set of quirks with templates.</li>
</ul>
<blockquote>
<p>Within a template expression, you have access to the parameters context that contains the values of parameters passed in. Additionally, you have access to the variables context that contains all the variables specified in the YAML file plus many of the predefined variables (noted on each variable in that topic). Importantly, it doesn't have runtime variables such as those stored on the pipeline or given when you start a run. Template expansion happens very early in the run, so those variables aren't available. <sup id="fnref:template-context"><a class="footnote-ref" href="../../azure-pipelines-template-iteration/#fn:template-context">4</a></sup></p>
</blockquote>
<ul>
<li>Expressions allow some conditional evaluation and change in behavior of the pipeline.<sup id="fnref2:expressions"><a class="footnote-ref" href="../../azure-pipelines-template-iteration/#fn:expressions">5</a></sup></li>
</ul>
<h4 id="template-structure"><a class="toclink" href="../../azure-pipelines-template-iteration/#template-structure">Template Structure</a></h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="nt">parameters</span><span class="p">:</span>
<a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;QUERY_NAME&#39;</span>
<a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a><span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">object</span>
<a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a><span class="w">    </span><span class="nt">default</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;CONFIGURATION&#39;</span>
<a id="__codelineno-7-6" name="__codelineno-7-6" href="#__codelineno-7-6"></a><span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
<a id="__codelineno-7-7" name="__codelineno-7-7" href="#__codelineno-7-7"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;SERVER_LIST&#39;</span>
<a id="__codelineno-7-8" name="__codelineno-7-8" href="#__codelineno-7-8"></a><span class="w">    </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">string</span>
</code></pre></div>
<p>Now that we have the parameters defined, we can use a steps block and loop on the <code>QUERY_NAME</code> parameter that could be a single or multiple entry input.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="nt">steps</span><span class="p">:</span>
<a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">${{ each query in parameters.QUERY_NAME }}</span><span class="p p-Indicator">:</span>
<a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a><span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">task</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">PowerShell@2</span>
<a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a><span class="w">        </span><span class="nt">displayName</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Query ${{ query }}</span>
<a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a><span class="w">        </span><span class="nt">inputs</span><span class="p">:</span>
<a id="__codelineno-8-6" name="__codelineno-8-6" href="#__codelineno-8-6"></a><span class="w">          </span><span class="nt">targetType</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">inline</span>
<a id="__codelineno-8-7" name="__codelineno-8-7" href="#__codelineno-8-7"></a><span class="w">          </span><span class="nt">script</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|</span>
<a id="__codelineno-8-8" name="__codelineno-8-8" href="#__codelineno-8-8"></a><span class="w">            </span><span class="no">&amp;./build.ps1 -Tasks &#39;run-my-query&#39; -Configuration &#39;${{ parameters.CONFIGURATION }}&#39; -QueryName &#39;${{ query }}&#39;</span>
<a id="__codelineno-8-9" name="__codelineno-8-9" href="#__codelineno-8-9"></a><span class="w">          </span><span class="nt">errorActionPreference</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;Stop&#39;</span>
<a id="__codelineno-8-10" name="__codelineno-8-10" href="#__codelineno-8-10"></a><span class="w">          </span><span class="nt">pwsh</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<a id="__codelineno-8-11" name="__codelineno-8-11" href="#__codelineno-8-11"></a><span class="w">          </span><span class="nt">failOnStderr</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<a id="__codelineno-8-12" name="__codelineno-8-12" href="#__codelineno-8-12"></a><span class="w">          </span><span class="nt">workingDirectory</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">$(Build.SourcesDirectory)</span>
<a id="__codelineno-8-13" name="__codelineno-8-13" href="#__codelineno-8-13"></a><span class="w">        </span><span class="nt">env</span><span class="p">:</span>
<a id="__codelineno-8-14" name="__codelineno-8-14" href="#__codelineno-8-14"></a><span class="w">          </span><span class="nt">OPTIONAL_ENV_VARS</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">${{ parameters.EXAMPLE }}</span>
</code></pre></div>
<p>This could also be slightly altered if you don't want inline scripts to use the following.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="nt">filePath</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">build.ps1</span>
<a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a><span class="nt">argumentList</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;-Tasks</span><span class="nv"> </span><span class="s">&#39;run-my-query&#39;</span><span class="nv"> </span><span class="s">-Configuration</span><span class="nv"> </span><span class="s">&#39;${{</span><span class="nv"> </span><span class="s">parameters.CONFIGURATION</span><span class="nv"> </span><span class="s">}}&#39;</span><span class="nv"> </span><span class="s">-QueryName</span><span class="nv"> </span><span class="s">&#39;${{</span><span class="nv"> </span><span class="s">query</span><span class="nv"> </span><span class="s">}}&#39;&quot;</span>
</code></pre></div>
<h3 id="reporting-progress"><a class="toclink" href="../../azure-pipelines-template-iteration/#reporting-progress">Reporting Progress</a></h3>
<p>As the task runs, you can output percent complete so that your task shows how far along it is.
I find this great for long running tasks, helping me check on them and know it's not stuck.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="l l-Scalar l-Scalar-Plain">Write-Host &quot;##vso[task.setprogress value=$PercentComplete;]MyTask&quot;</span>
</code></pre></div>
<h3 id="final-result"><a class="toclink" href="../../azure-pipelines-template-iteration/#final-result">Final Result</a></h3>
<p>This allows the job to set dynamically the individual tasks to run, report progress on each, and log the timing.</p>
<p>While it could be run as a single task, I prefer this type of approach because a long running job is now much more easily tracked as it progresses.</p>
<p><img alt="image-of-individual-tasks-in-pipeline" src="../../2021/images/2021-03-04-13.38.45-pipelines-example.png" /></p>
<h3 id="further-features"><a class="toclink" href="../../azure-pipelines-template-iteration/#further-features">Further Features</a></h3>
<p>Templates allow for a wide range of usage and flexibility that I've barely touched.
Selecting entire sets of tasks at runtime, variable sets, and more are all available.</p>
<p>This was a first round usage of them, as I really want to leverage the potentional for DRY with pipelines more, and templates offer a really flexible option to reusing core code across multiple pipelines without having to version each individually and try to keep them up to date.</p>
<h3 id="more-resources"><a class="toclink" href="../../azure-pipelines-template-iteration/#more-resources">More Resources</a></h3>
<ul>
<li><a href="https://bit.ly/3ruO5vT">Azure DevOps Tips: “Each” Loops. Applying DRY principle in CI/CD — Using… | by Jordan Lee | Medium</a></li>
<li>YAML schema - Azure Pipelines | Microsoft Docs <sup id="fnref:schema"><a class="footnote-ref" href="../../azure-pipelines-template-iteration/#fn:schema">1</a></sup></li>
<li>Predefined variables - Azure Pipelines | Microsoft Docs <sup id="fnref:predefined-variables"><a class="footnote-ref" href="../../azure-pipelines-template-iteration/#fn:predefined-variables">2</a></sup></li>
<li>Expressions <sup id="fnref:expressions"><a class="footnote-ref" href="../../azure-pipelines-template-iteration/#fn:expressions">5</a></sup></li>
</ul>
<div class="footnote">
<hr />
<ol>
<li id="fn:schema">
<p><a href="https://bit.ly/3rhAgRd">YAML schema - Azure Pipelines | Microsoft Docs</a>&#160;<a class="footnote-backref" href="../../azure-pipelines-template-iteration/#fnref:schema" title="Jump back to footnote 1 in the text">&#8617;</a></p>
</li>
<li id="fn:predefined-variables">
<p><a href="https://bit.ly/30a1du6">Predefined variables - Azure Pipelines | Microsoft Docs</a>&#160;<a class="footnote-backref" href="../../azure-pipelines-template-iteration/#fnref:predefined-variables" title="Jump back to footnote 2 in the text">&#8617;</a></p>
</li>
<li id="fn:json-lines">
<p><a href="https://bit.ly/3bgkTmi">A standard for jsonl</a>&#160;<a class="footnote-backref" href="../../azure-pipelines-template-iteration/#fnref:json-lines" title="Jump back to footnote 3 in the text">&#8617;</a></p>
</li>
<li id="fn:template-context">
<p><a href="https://bit.ly/2OoAXK0">Azure DevOps Template Context</a>&#160;<a class="footnote-backref" href="../../azure-pipelines-template-iteration/#fnref:template-context" title="Jump back to footnote 4 in the text">&#8617;</a></p>
</li>
<li id="fn:expressions">
<p><a href="https://bit.ly/30bDR7g">Expressions - Azure Pipelines | Microsoft Docs</a>&#160;<a class="footnote-backref" href="../../azure-pipelines-template-iteration/#fnref:expressions" title="Jump back to footnote 5 in the text">&#8617;</a><a class="footnote-backref" href="../../azure-pipelines-template-iteration/#fnref2:expressions" title="Jump back to footnote 5 in the text">&#8617;</a></p>
</li>
<li id="fn:variable-reuse">
<p><a href="https://bit.ly/2OqEreJ">Variable reuse</a>&#160;<a class="footnote-backref" href="../../azure-pipelines-template-iteration/#fnref:variable-reuse" title="Jump back to footnote 6 in the text">&#8617;</a></p>
</li>
</ol>
</div>
    
  </div>
</article>
      
        <article class="md-post md-post--excerpt">
  <header class="md-post__header">
    
    <div class="md-post__meta md-meta">
      <ul class="md-meta__list">
        <li class="md-meta__item">
          <time datetime="2021-02-23 00:00:00">February 23, 2021</time></li>
        
        
          
          <li class="md-meta__item">
            
              4 min read
            
          </li>
        
      </ul>
      
    </div>
  </header>
  <div class="md-post__content md-typeset">
    <h2 id="git-workflow-with-git-town"><a class="toclink" href="../../git-workflow-with-git-town/">Git Workflow With Git Town</a></h2>
<h3 id="resources"><a class="toclink" href="../../git-workflow-with-git-town/#resources">Resources</a></h3>
<p><a href="https://bit.ly/2OR6zIf">Git-Town</a></p>
<h3 id="painful-but-powerful"><a class="toclink" href="../../git-workflow-with-git-town/#painful-but-powerful">Painful But Powerful</a></h3>
<p>Let's get this out of the way.</p>
<p>Git isn't intuitive.</p>
<p>It has quite a bit of a learning curve.</p>
<p>However, with this flexibility comes great flexibility.
This tool has powered so much of modern open-source development.</p>
<h3 id="optimize-for-the-pain"><a class="toclink" href="../../git-workflow-with-git-town/#optimize-for-the-pain">Optimize for the Pain</a></h3>
<p>To improve the development experience some tools can help provide structure.</p>
<p>This won't be an attempt to compare every git GUI, or push any specific tooling.
It's more sharing my experience and what I've found helps accelerate my usage.</p>
<h3 id="tools-ive-relied-on"><a class="toclink" href="../../git-workflow-with-git-town/#tools-ive-relied-on">Tools I've Relied On</a></h3>
<ul>
<li><a href="https://bit.ly/2OR6zIf">Git-Town</a></li>
<li><a href="https://bit.ly/37F8vu1">Bit</a></li>
<li><a href="https://bit.ly/3boywik">GitHub CLI</a></li>
<li><a href="https://bit.ly/3pEu8AJ">Git Graph</a></li>
<li><a href="https://bit.ly/3dBaUcZ">Git Lens</a></li>
</ul>
<p>I'm not going to go into full detail on each, but check these out to help expedite your workflow.</p>
<h3 id="the-challenge-in-keeping-up-to-date-with-main"><a class="toclink" href="../../git-workflow-with-git-town/#the-challenge-in-keeping-up-to-date-with-main">The Challenge In Keeping Up To Date With Main</a></h3>
<p>I use what's normally called <code>trunk-based</code> development.
This entails regularly moving commits from branches into the main branch, often rebasing while maintaining it in a functional state.</p>
<p>I'll create a feature branch, bug fix, or refactor branch and then merge this to <code>main</code> as soon as functional.</p>
<p>I prefer a rebase approach on my branches, and when many ci/fix type commits, to squash this into a single unit of work as the results of the PR.
This can result in "merge hell" as you try rebase on a busy repo.</p>
<h3 id="enter-git-town"><a class="toclink" href="../../git-workflow-with-git-town/#enter-git-town">Enter Git Town</a></h3>
<p>This tool solves so many of the basic workflow issues, that it's become one of the most impactful tools to my daily work.</p>
<p>{{&lt; admonition type="Tip" title="Enable Aliases" closed=false &gt;}}
The examples that follow use <code>git sync</code>, <code>git hack feat/new-feature</code>, etc as examples because I've run the command <code>git-town alias true</code> which enables the alias configuration for git town, reducing verbosity.
Instead of <code>git town sync</code>, you can run <code>git sync</code>.
{{&lt; /admonition &gt;}}</p>
<h4 id="example-1-create-a-branch-for-a-new-unit-of-work-while-you-are-already-on-another-branch"><a class="toclink" href="../../git-workflow-with-git-town/#example-1-create-a-branch-for-a-new-unit-of-work-while-you-are-already-on-another-branch">Example 1: Create a Branch for a New Unit of Work While You Are Already On Another Branch</a></h4>
<p>Normally this would require:</p>
<ol>
<li>Stash/Push current work</li>
<li>Checkout master</li>
<li>Fetch latest and pull with rebase</li>
<li>Resolve any conflicts from rebase</li>
<li>Create the new branch from main</li>
<li>Switch to the new branch</li>
</ol>
<p>With Git Town</p>
<ol>
<li><code>git hack feat/new-feature</code></li>
</ol>
<h4 id="example-2-sync-main"><a class="toclink" href="../../git-workflow-with-git-town/#example-2-sync-main">Example 2: Sync Main</a></h4>
<p>The following steps would be performed by: <code>git sync</code></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>[master] git fetch --prune --tags
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>[master] git add -A
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>[master] git stash
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>[master] git rebase origin/master
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>[master] git push --tags
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a>[master] git stash pop
</code></pre></div>
<h4 id="example-3-new-branch-from-main"><a class="toclink" href="../../git-workflow-with-git-town/#example-3-new-branch-from-main">Example 3: New Branch From Main</a></h4>
<p>Easy to quickly ensure you are up to date with remote and generate a new branch with your current uncommitted changes.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="n">git</span> <span class="n">town</span> <span class="n">hack</span> <span class="n">fix</span><span class="p">/</span><span class="n">quick-fix</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>[master] git fetch --prune --tags
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a>[master] git add -A
<a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a>[master] git stash
<a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a>[master] git rebase origin/master
<a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a>[master] git branch feat/demo-feature master
<a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a>[master] git checkout feat/demo-feature
<a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a>[feat/demo-feature] git stash pop
</code></pre></div>
<h4 id="example-4-quickly-create-a-pr-while-on-a-branch-for-seperate-set-of-changes"><a class="toclink" href="../../git-workflow-with-git-town/#example-4-quickly-create-a-pr-while-on-a-branch-for-seperate-set-of-changes">Example 4: Quickly Create a PR While On A Branch for Seperate Set of Changes</a></h4>
<p>This workflow is far too tedious to do without tooling like this.</p>
<p>Let's say I'm on a branch doing some work, and then I recognize that another bug, doc improvements, or other change unrelated to my current work would be good to submit.</p>
<p>With git town, it's as simple as:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="n">git</span> <span class="n">town</span> <span class="n">hack</span> <span class="n">feat</span><span class="p">/</span><span class="n">improve-docs</span>
</code></pre></div>
<p>I can stage individual lines using VSCode for this fix if I want to, and then after committing:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>[feat/demo-feature] git fetch --prune --tags
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a>[feat/demo-feature] git add -A
<a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a>[feat/demo-feature] git stash
<a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a>[feat/demo-feature] git checkout master
<a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a>[master] git rebase origin/master
<a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a>[master] git branch feat/demo-feature-2 master
<a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a>[master] git checkout feat/demo-feature-2
<a id="__codelineno-4-8" name="__codelineno-4-8" href="#__codelineno-4-8"></a>[feat/demo-feature-2] git stash pop
</code></pre></div>
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="n">git</span> <span class="n">town</span> <span class="nb">new-pull</span><span class="n">-request</span>
</code></pre></div>
<h4 id="example-5-ship-it"><a class="toclink" href="../../git-workflow-with-git-town/#example-5-ship-it">Example 5: Ship It</a></h4>
<p>When not using a PR-driven workflow, such as solo projects, then you can still branch and get your work over to main to keep a cleaner history with:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="n">git</span> <span class="n">town</span> <span class="n">ship</span>
</code></pre></div>
<p>This command ensures all the sync features are run, while then initiating a squash of your branch, allow you to edit the squash message, rebase merge this onto main, and finally clean-up the stale branch.</p>
<h4 id="more-examples"><a class="toclink" href="../../git-workflow-with-git-town/#more-examples">More Examples</a></h4>
<p>Check out the documentation from the creators: <a href="https://bit.ly/3kjgsKy">Git Town Tutorials</a></p>
<h3 id="other-cool-features"><a class="toclink" href="../../git-workflow-with-git-town/#other-cool-features">Other Cool Features</a></h3>
<ul>
<li>Automatically prune stale branches after PR merge when syncing</li>
<li>Handles perennial branches if you are using Git Flow methodology.</li>
<li>Extensible for other git providers.</li>
<li>Rename a local branch + remote branch in a single command</li>
<li>Handles a lot of edge cases and failures</li>
</ul>
<h3 id="wrap-up"><a class="toclink" href="../../git-workflow-with-git-town/#wrap-up">Wrap-Up</a></h3>
<p>When using git, leveraging some tooling like this can accelerate your workflow.
I don't think you need to be an expert in git to use this, as it helps simplify many workflows that are just too tedious to be diligent on when running manually.</p>
<p>You can also do much of this with git aliases, but Git Town has a pretty robust feature-set with a testing framework in place, edge condition handling, and it's fast.
Consider using it you'd like to improve your git workflow while simplifying all the effort to do it right.</p>
<h3 id="backlinks"><a class="toclink" href="../../git-workflow-with-git-town/#backlinks">Backlinks</a></h3>
<ul>
<li>[Git Hub Desktop Quick Look]2021-06-18-git-hub-desktop-quick-look/)<ul>
<li>Update from <code>main</code> already built in.
This is fantastic, and I can see how this provides a UI to do something similar to <a href="https://www.git-town.com/">Git Town</a> which I blogged on earlier here: [2021-02-23-git-workflow-with-git-town]2021-02-23-git-workflow-with-git-town/)</li>
</ul>
</li>
</ul>
    
  </div>
</article>
      
      
        
          



<nav class="md-pagination">
  <a class="md-pagination__link" href="../..">1</a> <span class="md-pagination__dots">..</span> <a class="md-pagination__link" href="../9/">9</a> <a class="md-pagination__link" href="../10/">10</a> <span class="md-pagination__current">11</span> <a class="md-pagination__link" href="../12/">12</a> <a class="md-pagination__link" href="../13/">13</a> <span class="md-pagination__dots">..</span> <a class="md-pagination__link" href="../37/">37</a>
</nav>
        
      
    </div>
  </div>

          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.indexes", "navigation.instant", "navigation.tracking", "navigation.tabs", "navigation.tabs.sticky", "navigation.sections", "toc.follow", "navigation.top", "navigation.path", "search.suggest", "search.highlight", "content.code.copy"], "search": "../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.ad660dcc.min.js"></script>
      
        <script src="../../js/timeago.min.js"></script>
      
        <script src="../../js/timeago_mkdocs_material.js"></script>
      
        <script src="https://unpkg.com/mermaid@10.4.0/dist/mermaid.min.js"></script>
      
    
  <script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(() => { lightbox.reload() });
</script></body>
</html>